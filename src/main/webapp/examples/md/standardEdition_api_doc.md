**开放服务接口规范说明书**
-----------
#变更记录
|   版本号    | 修改原因/内容 | 修改人 | 修改时间  |
| --------- |:----------------------------|:--------------------|:----------|
|	Ⅴ 1.0	| 初稿          | 余世明 | 2016/3/16 |
|	Ⅴ 1.1	| 格式修订      | 余世明 | 2016/6/14 |
|	Ⅴ 1.2	| 1. 补充和完善接口说明；<br/>2. [客户预约通知](#4.5.7. N-FR-07客户预约通知（sale_appoint_notify）)消息类型改为dc.mq.cst.appoint；<br/>3. [客户手机新增](#4.3.5. P-CU-05客户手机新增（cst_mobile_add）)、[客户手机更新](#4.3.6. P-CU-06客户手机更新（cst_mobile_update）)接口字段调整； |周　亮| 2016/07/06 |
|	Ⅴ 1.3	| 1. 修正[客户推荐通知](#4.5.6. N-FR-06客户推荐通知（agent_recommend_notify）)消息类型；<br />2. 废弃预约上报、预约取消接口；<br />3. [机会查询接口](#4.4.10. G-FR-10机会查询（sale_opp_query）) companyGUID修改为string类型；| 周　亮 | 2016/07/12 |
|	Ⅴ 1.4	| 修正[置业顾问更新](#4.2.3. P-US-03置业顾问更新（sale_team_update）)的返回字段名称和描述； | 周　亮 | 2016/07/18 |
|	Ⅴ 1.5	| 1. [描摹上报接口](#4.3.8. P-CU-08客户描摹上报（cst_attach_create）)oppGUID、[机会更新接口](#4.4.6. P-FR-06机会更新 （sale_opp_update）)cstGUID改为非必须并增加字段说明；<br />2. [机会新增接口](#4.4.5. P-FR-05机会新增（sale_opp_create）)&[机会更新接口](#4.4.6. P-FR-06机会更新 （sale_opp_update）)增加visitStatus、tradeStatus字段； | 周　亮 | 2016/08/08 |

#1. 前言
本接口规范，是深讯地产数据中心系统，开放平台服务的接口接入协议。通过公开支持的接口列表，实现第三方应用接入数据中心系统，使用数据中心数据或资源；能够安全、准确、完整、实时地进行数据交互；互通对接数据中心的异构系统或平台。适用于经纪人平台、案场应用等，是接入数据中心必须遵循的标准。

#2. 总体规范
##2.1. 接口规范
*   接口采用HTTP+JSON，所有接口调用，均遵守HTTP协议，支持GET与POST两种方式，拒绝其它请求方式；统一使用UTF-8编码；包括消息内字段，及所有值。
*   所有上下行消息中，http协议头部分必须包含content-length和content-type两个字段，contnet-length即http协议body长度；content-type值固定为application/json；
*   所有返回消息或参数，均以文本格式进行返回，对于二进制数据，则通过其它模块，以资源管理形式进行库维护。
*   所有请求中，必须包含认证必须字段，否则视为无效请求，予以拒绝。
*   所有时间字段，均以年月日时分秒的长字符串表示，格式为:YYYY-MM-dd HH:mm:ss
*   所有上行消息的JSON，必须包含header和data两部分。header包含接口调用参数，即非业务相关数据；data部分为实际的业务数据；data为结构化的json转成字符串后，根据数据中心分配appkey加密后的base64字符串，加密算法为RC4。格式示例：
```json
		{
			"header":{},
			"data":""
		}
```
+ `header`必须包含的信息有

| 字段      | 说明                                                                                                                                 |
|:--------  |:------------------------------------------------------------------------------------------------------------------------------------ |
| appid     | 数据中心分配给应用的标识                                                                                                             |
| timestamp | 时间戳，UTC秒值                                                                                                                      |
| sid       | 消息ID，查看2.4章节SID定义                                                                                                           |
| authCode  | 认证校验码，即按自然排序后字符串拼接组合appid、sid、token、dataCode计算出的sha1散列码；其中token是数据中心分配给应用的校验码         |
| cmd       | 调用命令，即接口名称，查看第4章节开放接口标题括号中定义                                                                              |
| version   | 版本                                                                                                                                 |
| dataCode  | 数据校验码，即结构化的json转成字符串后使用appkey加密后的数据，经Base64加密后计算出的sha1散列码。其中appkey是数据中心分配给应用的秘钥 |

*	所有响应消息的JSON，data部分加密的密钥与算法同上行消息。格式示例：
``` json
{
	"header":{},
	"data":""
}
```
其中data部分的原文格式为：
``` json
	{
		"errcode":0,
		"errmsg":"",
		"content":{}
	}
```
*	所有响应消息中，除errcode和errmsg外，所有必须参数，均指在errcode为0(成功)的情况下才是必须(特殊情况除外)

##2.2.系统编号（APPID）
| 系统分类   | APPID编号 | 说明                                     |
|:--------   |:--------  |:---------------------------------------  |
| 数据中心   | 1XX       | 所有数据中心模块或子系统APPID取值范围为100~199  |                                                                                                                            
| 经纪人平台 | 2XX       | 经纪人类平台系统，如带客通、同享会等APPID取值范围为200~299    |                                                                                                               
| 案场类     | 3XX       | 包括案场、微信等案场类系统APPID取值为300~399    |                                      
| ERP系统    | 4XX       | 指现有传统ERP系统，如明源、用友等APPID取值范围为400~499       |
| 会员类     | 5XX       | 包括统一会员平台或各业态的独有会员系统APPID的取值范围为500~599      |                                                                                                
| 电商类     | 6XX       | 包括第三方或自有渠道应用，如京东、官微等APPID的取值范围为600~699    | 
                                                                    
##2.3. 接口编号规则
接口编号规则，定义分3部分，示例：`P1-P2-P3`

-	`P1`：表示接口接口处理方式。目前取值分别是
P:上报类接口
G:查询类接口
N:通知类接口
-	`P2`：表示数据用途分类。目前取值分别是
BA：基础数据类接口
US：用户类接口
CU：客户类接口
FR：跟进类接口
SY：系统类接口
-	`P3`：表示在数据用途类范围内的接口编号

##2.4. 接口版本控制规则
<!-- -->
-   一级版本号：接口系统级别，由接口规范header/version参数控制。
-   二级版本号：接口级别，由接口编号控制，详见2.3节接口编号规范。
-   三级版本号：接口参数级别，接口编号不变，由接口命令字+”_v”+版本号控制
>   例如：proj_attach_list_v2，由于接口G-BA-13项目特征查询（proj_attach_list）参数调整，造成与老接口不兼容，需增加一个新的接口“G-BA-13新项目特征查询（proj_attach_list_v2）”

##2.5. SID定义
对应`head`包中的 `sid` 定义：
数据中心与应用系统接口交互消息包中都有一个消息序列号，序列号由系统请求方产生并唯一标记一次请求；也就是说，数据中心系统中任意两条消息序列号都不相同。对于数据中心主动推送到业务应用（经纪人平台、案场应用等）的消息，例如数据中心向案场发送一条推荐客户信息，此时序列号由数据中心生成（此时命令源节点为数据中心）。
序列号分成三部分，每部分为一个整数，第一部分表示命令源系统的编号，第二部分表示命令产生的日期和时间，格式为十进制的yymmddhhmm，比如14年11月20日20时32分25秒产生的消息，其第二部分为十进制141120203225；第三部分由0开始，最大值是99999，循环进位，直到进位满了之后再清零，重新开始计数, 不够5位，左补0

#3. 接入认证
上下行接入认证，采用同样算法；数据取值不同；应用上行到数据中心的，采用数据中心分配给应用的`appid`和`appkey`进行解析认证；数据中心下行到应用的，采用数据中心的`appid`和数据中心分配给应用`appkey`进行解析认证；

##3.1. 请求步骤封装
1. 首先根据`SID`生成规则，生成消息ID
2. 将业务数据转成结构化的`json`转成字符串后，用数据中心分配的appkey进行`RC4`加密，密文经`base64`加密后`sha1`，即`dataCode` = `sha1\[base64\[RC4\[jsonData\]\]\]`
3. 把密文进行`base64`加密；作为`data`字段值，即`data` = `base64\[RC4\[jsonData\]\]`
4. 把`appid`、`sid`、数据中心分配的`token`、`dataCode`按自然排序后拼接组装成字符串之后计算`sha1`,即`authCode`，即`authCode`=`sha1\[concat\[sort\[appid,sid,token,dataCode\]\]\]`
5. 创建`header`，包括字段`appid`、`sid`、`token`、`authCode`、`cmd`、`timestamp`、`version`、`dataCode`
示例：
``` java
**初始化数据**：
appid = "123";
token = "52e41ab0d3eee56b725e3e29999762a8";
appkey = "S_+SFO!fH.7qj_CEIKgCoSRfYr&e%,zAL1-*UEW7D]V$o4Cc=Dd4kwSh%6Q<!?=!+_@H^,K*#Gdk/d.qp@nBjl:e^/,.ckVGC2<4OoZNS2JN5<IX[Uq0W0oI-Y(K[k-R";
sid = "2014123123123123";
data = "{\"hello\":123}";
cmd = "cst_identity";
```
> **1.**根据`data`计算原始字节码：

``` html
7B 22 68 65 6C 6C 6F 22 3A 31 32 33 7D
```

> **2.**根据原始字节码计算密文：

``` html
15 0C FC 96 18 A1 15 B0 47 F1 F5 78 3C
```

> **3.**根据密文计算`base64`：

``` html
FQz8lhihFbBH8fV4PA==
```
> **4.**根据`base64`计算`sha1`散列码，即`dataCode`：

``` html
a975283943d4be0d7cb355c2115f45d63b5dcc5d
```
> **5.**将`appid`、`sid`、`token`、`dataCode`组合起来：

``` html
123201412312312312352e41ab0d3eee56b725e3e29999762a8a975283943d4be0d7cb355c2115f45d63b5dcc5d
```
> **6.**计算其`sha1`散列码，即`authCode`：

``` html
8c694932bba5d137af13654ce5a875d30a267ec8
```
> **7.**计算结果：

``` json
{
    "header": {
        "timestamp": 1436782123,
        "dataCode": "a975283943d4be0d7cb355c2115f45d63b5dcc5d",
        "authCode": "8c694932bba5d137af13654ce5a875d30a267ec8",
        "sid": "2014123123123123",
        "cmd": "cst_identity",
        "appid": "123",
        "version": "2.0"
    },
    "data": "FQz8lhihFbBH8fV4PA=="
}
```

##3.2. 接收验证步骤
1. 首先根据`http`头部的`content-length`读取报文后，解析成JSON；
2. 取header中的`appid`、`sid`、数据中心分配的`token`、`dataCode`，按自然排序后字符串拼接组装后计算`sha1`，与`authCode`比较判断接入认证
3. 接入认证成功后，以`base64`解密算法，将`data`值还原成密文；
4. 计算密文的`sha1`散列码，比较`dataCode`校验是否被篡改；
5. 篡改校验通过后，再用数据中心分配的`appkey`为密钥，以`RC4`算法解密转成结构化的JSON字符串
6. 示例：
``` json
//接收报文：
{
    "header": {
        "timestamp": 1436782123,
        "dataCode": "a975283943d4be0d7cb355c2115f45d63b5dcc5d",
        "authCode": "8c694932bba5d137af13654ce5a875d30a267ec8",
        "sid": "2014123123123123",
        "appid": "123",
        "version": "2.0"
    },
    "data": "FQz8lhihFbBH8fV4PA=="
}
```

> **1.**拼接`appid`、`sid`、`token`、`dataCode`：

``` html
123201412312312312352e41ab0d3eee56b725e3e29999762a8a975283943d4be0d7cb355c2115f45d63b5dcc5d
```
> **2.**计算拼接后字符串的`sha1`散列码：

``` html
8c694932bba5d137af13654ce5a875d30a267ec8
```
> **3.**计算`data`的`sha1`散列码：

``` html
a975283943d4be0d7cb355c2115f45d63b5dcc5d
```
> **4.** 经过以上三步计算，验证通过，则进行以下5､6两步：
> **5.** 以`base64`还原`data`为密文

``` html
15 0C FC 96 18 A1 15 B0 47 F1 F5 78 3C
```
> **6.**以`appKey`解密密文（如果是数据中心，`appKey`是以`appid`查找在数据中心配置的`appKey`，如果找不到，则不给任何响应数据；若是接入应用，则为数据中心分配的固定`appKey`）：

``` html
7B 22 68 65 6C 6C 6F 22 3A 31 32 33 7D
```

#4. 开放接口
无特殊原因，以下所有接口的请求参数说明和响应参数说明，省略接口协议header、data/errcode、data/errmsg，只对data/content包含下的json数据进行参数定义。对应data/content，如果包含多层嵌套json数据，参数统一定义为：obj1/obj2/…。

##4.1. 基础资源类接口

###4.1.1. G-BA-01代理公司查询(org_query)

**接口说明**
+ **功能描述**
代理公司查询，支持分页
+ **应用方(适应系统)：**
经纪人平台、移动案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
<font color='#D3D3D3'>调用内部数据服务接口：base_get_sales_team_list</font>（已过时）
查询数据中心表：b_org
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数     | 必须 | 类型 | 长度 | 说明                                           |
|:----------|:-----|:-----|:-----|:-----------------------------------------------|
| page     | 否   | int  | 10   | 页码，不填默认为1                              |
| pageSize | 否   | int  | 10   | 一页大小，取值范围是［10，1000］，不填默认为10 |
| orgType  | 否   | int  | 10   | 组织类型<br>1=代理公司<br>2=中介公司<br>3=区域公司/事业部<br>4=商场<br>5=商铺<br>6=门店     |                                   
| subType  | 否   | int  | 10   | 子类型,orgType=3 时有效，默认为0<br>0 无效<br>1 集团<br>2 区域公司<br>3 地市公司<br>4 部门<br>5 业态公司   |                                          
                                
**响应说明**
+ **响应参数说明**

| 参数               | 必须 | 类型      | 长度 | 说明         |
|:-------------------|:-----|:----------|:-----|:-------------|
| totalPage          | 是   | int       | 10   | 记录总页数   |
| page               | 是   | int       | 10   | 本次查询页码 |
| list               | 是   | jsonArray | N/A  | 记录列表     |
| list/orgGUID       | 是   | string    | 64   | 公司GUID     |
| list/orgName       | 是   | string    | 64   | 公司名称     |
| list/orgShortName  | 否   | string    | 32   | 公司简称（<font color="red">暂不支持</font>）|
| list/status        | 否   | string    | 64   | 状态         |
| list/cityCode      | 否   | int       | 10   | 城市代码（<font color="red">暂不支持</font>） |
| list/cityShortCode | 否   | int       | 10   | 城市短代码（<font color="red">暂不支持</font>） |
| list/parentOrgCode | 否   | string    | 64   | 上级组织ID   |
| list/orgFullCode   | 否   | string    | 100  | 组织长编码（<font color="red">暂不支持</font>）  |
| list/orgType       | 是   | int       | 10   | 组织类型     |

###4.1.2. G-BA-02城市查询(city_query)

**接口说明**
+ **功能描述**
城市信息查询，支持分页
+ **应用方(适应系统)：**
经纪人平台、移动案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
<font color='#D3D3D3'>调用数据服务接口：base_get_city_list</font>（已过时）
查询数据中心表：b_city
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数     | 必须 | 类型 | 长度 | 说明                                           |
|:----------|:------|:-----|:-----:------------------------------------------------|
| page     | 否   | int  | 10   | 页码，不填默认为1                              |
| pageSize | 否   | int  | 10   | 一页大小，取值范围是［10，1000］，不填默认为10 |

**响应说明**
+ **响应参数说明**

| 参数          | 必须 | 类型      | 长度 | 说明         |
|:--------------|:-----|:----------|:-----|:-------------|
| totalPage     | 是   | int       | 10   | 记录总页数   |
| page          | 是   | int       | 10   | 本次查询页码 |
| list          | 是   | jsonArray | N/A  | 记录列表     |
| list/cityCode | 是   | string    | 64   | 城市编号     |
| list/cityName | 是   | string    | 64   | 城市名称     |

###4.1.3. P-BA-03中介代理上报(org_create)

**接口说明**
+ **功能描述**
新增或修改中介代理结构，上报数据中心
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：base_create_area_company
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数         | 必须 | 类型   | 长度 | 说明                           |
|:-------------|:-----|:-------|:-----|:-------------------------------|
| orgGUID      | 否   | string | 64   | 组织机构标识，如果带上表示更新 |
| orgName      | 是   | string | 64   | 公司名称                       |
| orgShortName | 否   | string | 32   | 公司简称  （<font color="red">暂不支持</font>）    |
| orgType      | 是   | int    | 4    | 组织类型：<br>1 代理公司<br>2 中介公司                      |                                                                                                          
| contact      | 是   | string | 64   | 联系人                         |
| tel          | 是   | string | 32   | 联系电话                       |
| status       | 是   | int    | 4    | 状态:<br>1有效   <br>0无效                           |                                                              
| parentGUID   | 否   | string | 64   | 上级组织                       |
| cityCode     | 是   | string | 32   | 城市编码                       |

**响应说明**
+ **响应参数说明**

| 参数    | 必须 | 类型   | 长度 | 说明                    |
|:--------|:-----|:-------|:-----|:------------------------|
| orgGUID | 否   | string | 64   | 组织机构标识,成功时返回 |

###4.1.4. G-BA-04项目查询(proj_query)

**接口说明**
+ **功能描述**
查询数据中心项目或商场数据
+ **应用方(适应系统)：**
经纪人平台、移动案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
查询数据中心表：b_proj[b_proj_city]
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数        | 必须 | 类型   | 长度 | 说明                                           |
|:------------|:-----|:-------|:-----|:-----------------------------------------------|
| page        | 否   | int    | 10   | 页码，不填默认为1                              |
| pageSize    | 否   | int    | 10   | 一页大小，取值范围是［10，1000］，不填默认为10 |
| articleType | 否   | int    | 10   | 类型：不传时默认全部  <br> 1 项目  <br> 2 商场                                          |                                                       
| articleGUID | 否   | string | 64   | 项目编号                                       |

**响应说明**
+ **响应参数说明**

| 参数                | 必须 | 类型      | 长度 | 说明                                   |
|:--------------------|:-----|:----------|:-----|:---------------------------------------|
| totalPage           | 是   | int       | 10   | 记录总页数                             |
| page                | 是   | string    | 10   | 本次查询页码                           |
| list                | 是   | jsonArray | N/A  | 结果集                                 |
| list/articleGUID    | 是   | string    | 64   | 项目ID                                 |
| list/articleName    | 是   | string    | 64   | 项目名称                               |
| list/parentGUID     | 是   | string    | 64   | 父级项目ID                             |
| list/cityCode       | 是   | string    | 64   | 城市编码                               |
| list/status         | 是   | int       | 4    | 状态：1有效0无效                       |
| list/lastModifyTime | 是   | datetime  | 32   | 最后修改时间,格式*YYYY-MM-dd HH:mm&#58;ss* |
| list/ifEnd          | 是   | int       | 4    | 是否最末级项目：  <br> 0 否       <br>  1 是                                    |                                                              
| list/buGUID         | 是   | string    | 64   | 项目所属公司编码                       |
| list/level          | 是   | int       | 4    | 级别                                   |
| list/articleType    | 是   | int       | 4    | 项目类型： <br> 1 项目  <br> 2 商场                                  |                          
                                                                                                       
###4.1.5. G-BA-05房产查询(room_query)

**接口说明**
+ **功能描述**
根据项目或楼栋查询房产信息列表;项目和楼栋都不是必须参数，如果只传项目，则按项目查询；如果只传楼栋，则按楼栋查询；如果都传，则查询项目下某模楼栋的房产；都不传，则为非法查询。
+ **应用方(适应系统)：**
经纪人平台、移动案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
查询数据中心表：b_room[b_building、b_proj]
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数         | 必须                       | 类型   | 长度 | 说明                                           |
|:-------------|:---------------------------|:-------|:-----|:-----------------------------------------------|
| page         | 否                         | int    | 10   | 页码，不填默认为1                              |
| pageSize     | 否                         | int    | 10   | 一页大小，取值范围是［10，1000］，不填默认为10 |
| projGUID     | 否，building不存在时必须时 | string | 64   | 项目编号                                       |
| buildingGUID | 否，projGUID不存在时必须   | string | 40   | 楼栋                                           |

**响应说明**
+ **响应参数说明**

| 参数              | 必须           | 类型      | 长度 | 说明         |
|:------------------|:---------------|:----------|:-----|:-------------|
| totalPage         | 是             | int       | 10   | 记录总页数   |
| page              | 是             | int       | 10   | 本次查询页码 |
| list              | 记录存在时必须 | jsonArray | N/A  | 记录列表     |
| list/roomGUID     | 是             | string    | 64   | 房间GUID     |
| list/huxing       | 是             | string    | 64   | 户型         |
| list/roomNo       | 是             | string    | 64   | 房号         |
| list/area         | 是             | float     | 64   | 建筑面积     |
| list/saleStatus   | 是             | int       | 64   | 销控状态: <br>0=待售<br>1=预留<br>2=已售        |                                                          
| list/projGUID     | 是             | string    | 64   | 项目编号     |
| list/projName     | 是             | string    | 64   | 项目名称     |
| list/buildingGUID | 是             | string    | 64   | 楼栋         |
| list/buildingName | 是             | string    | 64   | 楼栋名称     |
| list/unit         | 是             | string    | 64   | 楼栋单元     |

###4.1.6. G-BA-06楼栋查询(building_query)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
查询数据中心表：b_building
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数     | 必须 | 类型   | 长度 | 说明                                           |
|:---------|:-----|:-------|:-----|:-----------------------------------------------|
| page     | 否   | int    | 10   | 页码，不填默认为1                              |
| pageSize | 否   | int    | 10   | 一页大小，取值范围是［10，1000］，不填默认为10 |
| projGUID | 是   | string | 64   | 项目编号                                       |

**响应说明**
+ **响应参数说明**

| 参数              | 必须           | 类型      | 长度 | 说明         |
|:------------------|:---------------|:----------|:-----|:-------------|
| totalPage         | 是             | int       | 10   | 记录总页数   |
| page              | 是             | int       | 10   | 本次查询页码 |
| list              | 记录存在时必须 | jsonArray | N/A  | 记录列表     |
| list/buildingGUID | 是             | string    | 64   | 楼栋         |
| list/buildingName | 是             | string    | 64   | 楼栋名称     |
| list/unit         | 是             | string    | 64   | 单元数量     |

###4.1.7. G-BA-07楼栋单元查询(building_unit_query)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
查询数据中心表：b_building_unit
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数     | 必须 | 类型   | 长度 | 说明                                           |
|:---------|:-----|:-------|:-----|:-----------------------------------------------|
| page     | 否   | int    | 10   | 页码，不填默认为1                              |
| pageSize | 否   | int    | 10   | 一页大小，取值范围是［10，1000］，不填默认为10 |
| bldGUID  | 是   | string | 64   | 楼栋GUID                                      |

**响应说明**
+ **响应参数说明**

| 参数              | 必须           | 类型      | 长度 | 说明                     |
|:------------------|:---------------|:----------|:-----|:-------------------------|
| totalPage         | 是             | int       | 10   | 记录总页数               |
| page              | 是             | int       | 10   | 本次查询页码             |
| list              | 记录存在时必须 | jsonArray | N/A  | 记录列表                 |
| list/unitGUID     | 是             | string    | 64   | 单元编号（数据中心编号） |
| list/buildingGUID | 是             | string    | 64   | 楼栋编号                 |
| list/unitName     | 是             | string    | 64   | 单元名称                 |

###4.1.8. G-BA-08项目特征查询(proj_attach_query)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
查询数据中心表：b_def_attach_values[b_def_attach]
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数     | 必须 | 类型   | 长度 | 说明                                           |
|:---------|:-----|:-------|:-----|:-----------------------------------------------|
| page     | 否   | int    | 10   | 页码，不填默认为1                              |
| pageSize | 否   | int    | 10   | 一页大小，取值范围是［10，1000］，不填默认为10 |
| projGUID | 是   | string | 64   | 项目编号                                       |
| category | 否   | int    | 4    | 途径分类:<br>10 渠道 <br>20 身份<br>30 业态<br>40 客户描摹<br>50 机会描摹<br>60 途径定义<br>70 媒体活动定义<br/>（案场使用的类型为：40、50）  |                                                                                                           

**响应说明**
+ **响应参数说明**

| 参数                         | 必须 | 类型      | 长度 | 说明                                                                                         |
|:-----------------------------|:-----|:----------|:-----|:---------------------------------|
| totalPage                    | 是   | int       | 4    | 记录总页数                                                                                   |
| page                         | 是   | int       | 4    | 当前页码                                                                                     |
| attachs                      | 是   | array     |      | 特征集合                                                                                     |
| attachs/attachGUID           | 是   | string    | 64   | 特征编号                                                                                     |
| attachs/attachCode           | 是   | string    | 64   | 特征编码，全局唯一，详见数据中心描摹标准定义文档                                             |
| attachs/attachName           | 是   | string    | 64   | 特征名称                                                                                     |
| attachs/category             | 是   | int       | 4    | 属于哪一类的特征定义，如身份定义、渠道定义、业态定义、途径定义等；<br>10 渠道<br>20 身份 <br>30 业态 <br>40 客户描摹 <br>50 机会描摹<br>60 途径定义<br>70 媒体活动定义 |
| attachs/attachLevel          | 是   | int       | 4    | 特征级别 <br>1=全局系统级  <br>4=项目组织级 <br>16=公司级 <br>取自数据服务接口data/attachs/items/下的第一个的itemLevel|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
| attachs/attachType           | 否   | int       | 4    | 暂不支持。类型根据分类不同分不同的值表示，如分类值是20,即身份，<br>则type可取值为<br>1=自然人<br>2=机构|                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
| attachs/scopeGUID            | 是   | list      | 64   | 范围对象编号，<br>attachLevel=4,scopeGUID取值为项目编号;<br>attachLevel=16,scopeGUID取值为公司编号;<br>attachLevel=0<br>取自数据服务接口data/attachs/items/的scopeGUID去重后的并集  |
| attachs/subGUID              | 否   | string    | 64   | 外键subGUID，引用特征描摹定义表b\_def\_attach(attachGUID),作为特征联动使用。没有则默认不支持 |
| attachs/input                | 是   | int       | 4    | 输入方式   <br>1=手动输入（默认值）   <br>2=单选           <br>3=多选  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
| attachs/showType             | 否   | int       | 4    | 显示方式   <br>0：二级平面（默认值）  <br> 1：树状分局   |                                                                                                                                                                                                                                                                                                                                                     
| attachs/requiredLevel        | 否   | int       | 4    | 输入级别：     <br>0：否（默认值），非必需     <br>1：是，必填   |                                                                                                                                                                                                                                                                                                                                                    
| attachs/items                | 否   | jsonArray |      | 候选项列表，attachs/input不等于1时是必须的                                                   |
| attachs/items/itemGUID       | 是   | string    | 64   | 候选项编号                                                                                   |
| attachs/items/itemCode       | 是   | string    | 64   | 候选项编码 (attachKey)                 |
| attachs/items/parentItemGUID | 否   | string    | 16   | 父级特征项编号                                                                               |
| attachs/items/itemName       | 是   | string    | 64   | 候选项名称(label)                      |
| attachs/items/sequence       | 否   | int       | 10   | 候选项的顺序                                                                                 |
| attachs/items/state          | 是   | int       | 4    | 状态：1有效，0无效                                                                           |
| attachs/items/expireTime     | 否   | datetime  | 32   | 过期时间，默认为空，表示永不过期                                                             |
| attachs/items/scopeGUID      | 是   | string    | 64   | 范围对象编号，<br>例如attachLevel=4,scopeGUID取值为项目编号;<br>attachLevel=16,scopeGUID取值为公司编号;   |                                     
                                                          
###4.1.9. G-BA-09商铺查询(shop_query)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
查询数据中心表：b_shop
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数     | 必须 | 类型   | 长度 | 说明                                           |
|:---------|:-----|:-------|:-----|:-----------------------------------------------|
| page     | 否   | int    | 10   | 页码，不填默认为1                              |
| pageSize | 否   | int    | 10   | 一页大小，取值范围是［10，1000］，不填默认为10 |
| shopGUID | 否   | string | 64   | 编号                                           |

**响应说明**
+ **响应参数说明**

| 参数              | 必须 | 类型      | 长度 | 说明                                           |
|:------------------|:-----|:----------|:-----|:-----------------------------------------------|
| totalPage         | 是   | int       | 10   | 记录总页数                                     |
| page              | 是   | int       | 10   | 本次查询页码                                   |
| list              | 否   | jsonArray | N/A  | 结果集                                         |
| list/shopGUID     | 是   | string    | 64   | 业态商铺主键GUID                               |
| list/orgGUID      | 是   | string    | 64   | 关联b\_org表中的orgGUID                        |
| list/projGUID     | 是   | string    | 64   | 所属项目/商场，关联b\_proj表                   |
| list/shopName     | 是   | string    | 64   | 商铺名称                                       |
| list/address      | 是   | string    | 64   | 地址                                           |
| list/status       | 是   | int       | 4    | 门店状态：<br>0 已关店<br>1 正常营业<br>2 暂停营业<br>3 未开业  |
| list/weekOpen     | 是   | string    | 128  | 每周营业日期：<br>即周一到周日（对应1〜7）哪几天营业，以逗号分割<br>如：1,3,5,7；默认为全部                         |
| list/shopType     | 是   | int       | 10   | 经营种类或品牌等                               |
| list/contractGUID | 是   | string    | 64   | 级别                                           |
| list/signDate     | 是   | datetime  | 32   | 注册时间, 格式为：*YYYY-MM-dd HH:mm&#58;ss*        |
| list/beginDate    | 是   | datetime  | 32   | 开始时间, 格式为：*YYYY-MM-dd HH:mm&#58;ss*        |
| list/endDate      | 是   | datetime  | 32   | 关闭时间, 格式为：*YYYY-MM-dd HH:mm&#58;ss*        |
| list/ywy          | 否   | string    | 64   | 办理业务员                                     |
| list/myGUID       | 否   | string    | 64   | 签约人                                         |

##4.2. 用户类接口

###4.2.1. G-US-01销售团队信息查询(sale_team_query)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：销售团队查询(base_get_sales_team_list)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数     | 必须 | 类型   | 长度 | 说明                                           |
|:---------|:-----|:-------|:-----|:-----------------------------------------------|
| page     | 否   | int    | 10   | 页码，不填默认为1                              |
| pageSize | 否   | int    | 10   | 一页大小，取值范围是［10，1000］，不填默认为10 |
| projGUID | 是   | string | 64   | 项目编号                                       |
| orgGUID  | 否   | string | 64   | 代理公司编号                                   |

**响应说明**
+ **响应参数说明**

| 参数          | 必须 | 类型      | 长度 | 说明         |
|:--------------|:-----|:----------|:-----|:-------------|
| totalPage     | 是   | int       | 10   | 记录总页数   |
| page          | 是   | int       | 10   | 本次查询页码 |
| list          | 是   | jsonArray | N/A  | 记录列表     |
| list/teamGUID | 是   | string    | 64   | 团队编号     |
| list/teamName | 是   | string    | 64   | 团队名称     |
| list/orgGUID  | 是   | string    | 64   | 公司编号     |

###4.2.2. G-US-02置业顾问查询(sale_user_query)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：销售团队查询(base_get_sales_team_list)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数     | 必须                     | 类型   | 长度 | 说明         |
|:---------|:-------------------------|:-------|:-----|:-------------|
| projGUID | 否,teamGUID不存在时必须  | string | 64   | 项目编号     |
| teamGUID | 否，projGUID不存在时必须 | string | 40   | 销售团队编号 |

**响应说明**
+ **响应参数说明**

| 参数              | 必须           | 类型      | 长度 | 说明                     |
|:------------------|:---------------|:----------|:-----|:-------------------------|
| list              | 记录存在时必须 | jsonArray | N/A  | 记录列表                 |
| list/userGUID     | 是             | string    | 64   | 用户GUID                 |
| list/userName     | 是             | string    | 64   | 用户名称                 |
| list/teamGUID     | 是             | string    | 64   | 团队编号                 |
| list/projGUID     | 是             | string    | 64   | 所属项目                 |
| list/attachCode   | 是             | string    | 64   | 角色                     |
| list/status       | 是             | int       | 64   | 状态:<br>0=无效<br>1=有效<br>2=离职  |
| list/statusReason | 是             | string    | 64   | 状态原因                 |
| list/mobile       | 是             | string    | 64   | 手机号码                 |
| list/gender       | 是             | int       | 4    | 性别:<br>0=未知<br>1=男<br>2=女 |

###4.2.3. P-US-03置业顾问更新（sale_team_update）

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：置业顾问更新(cst_update_consultant)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数         | 必须 | 类型   | 长度 | 说明         |
|:-------------|:-----|:-------|:-----|:-------------|
| userGUID     | 是   | string | 64   | 置业顾问GUID |
| companyGUID  | 是   | string | 64   | 销售团队     |
| status       | 是   | int    | 10   | 状态：<br>0=无效<br>1=有效<br>2=离职|                                                                                            
| statusReason | 是   | string | 64   | 状态原因     |

**响应说明**
+ **响应参数说明**

| 参数           | 必须 | 类型   | 长度 | 说明         |
|:---------------|:-----|:-------|:-----|:-------------|
| userGUID | 是   | string | 64   | 置业顾问GUID |

###4.2.4. G-US-04经纪人鉴定(agent_identify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：客户身份查询(cst_get_identity)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数   | 必须                                  | 类型   | 长度 | 说明           |
|:-------|:--------------------------------------|:-------|:-----|:---------------|
| mobile | 否，手机为空时，身份证号码不能为空    | string | 16   | 手机号码       |
| name   | 否                                    | string | 32   | 姓名，暂不支持 |
| cardId | 否,身份证号码为空时，手机号码不能为空 | string | 18   | 身份证号码     |

**响应说明**
+ **响应参数说明**

| 参数      | 必须 | 类型      | 长度 | 说明                             |
|:----------|:-----|:----------|:-----|:---------------------------------|
| identitys | 是   | jsonArray | N/A  | 身份列表，如业主、建发房产员工、<br>建发集团员工、会员等：<br>20101 曾经业主<br>20102 当前业主<br>20103 租客<br>20201会员<br>20301 经纪人<br>20302 置业顾问<br>20401 员工<br>20402 房产员工<br>20501 供应商<br>20502 企业客户   |
										
###4.2.5. P-US-05经纪人新增 (agent_create)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：经纪人新增(cst_create_agent)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数            | 必须 | 类型   | 长度 | 说明                     |
|:----------------|:-----|:-------|:-----|:-------------------------|
| name            | 是   | string | 32   | 经纪人姓名               |
| mobile          | 是   | string | 32   | 手机号码                 |
| areaCode        | 是   | int    | 10   | 所在城市ID               |
| agentClasses    | 是   | int    | 4    | 经纪人类别：<br>1 合作方<br>2 中介公司<br>3 业主<br>4 非房产员工<br>5 外部代理公司<br>6 独立经纪人<br>7 企业用户<br>8 无佣金经纪人            |                                        
| proxyCompanyId  | 否   | string | 64   | 所在代理公司             |
| agencyCompanyId | 否   | string | 64   | 所在中介公司             |
| totalPoint      | 否   | int    | 10   | 累计积分，暂不支持       |
| point           | 否   | int    | 10   | 可用积分，暂不支持       |
| level           | 否   | int    | 10   | 所在中介公司：<br> 1 经纪人等级（普通经纪人）<br>2 铜牌经纪人<br>3 银牌经纪人<br>4 金牌经纪人<br>5 钻石经纪人<br>**暂不支持**              |                                                   
| comment         | 否   | string | 50   | 中介公司经纪人：所在门店<br>员工：所在部门<br>业主：所在物业            |
| status          | 否   | int    | 4    | 状态：<br>1 有效<br>0 无效                    |

**响应说明**
+ **响应参数说明**

| 参数      | 必须 | 类型   | 长度 | 说明       |
|:----------|:-----|:-------|:-----|:-----------|
| agentGUID | 是   | string | 64   | 经纪人GUID |

###4.2.6 G-US-06经纪人更新(agent_update)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：经纪人更新(cst_update_agent)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数            | 必须 | 类型   | 长度 | 说明                     |
|:----------------|:-----|:-------|:-----|:-------------------------|
| agentGUID       | 是   | string | 16   | 手机号码                 |
| name            | 是   | string | 32   | 经纪人姓名               |
| mobile          | 是   | string | 32   | 手机号码                 |
| areaCode        | 是   | int    | 10   | 所在城市ID               |
| agentClasses    | 是   | int    | 4    | 经纪人类别：<br>1 合作方<br>2 中介公司<br>3 业主<br>4 非房产员工<br>5 外部代理公司<br>6 独立经纪人<br>7 企业用户<br>8 无佣金经纪人            |                                                      
| proxyCompanyId  | 否   | string | 64   | 所在代理公司             |
| agencyCompanyId | 否   | string | 64   | 所在中介公司             |
| comment         | 否   | string | 50   | 中介公司经纪人：所在门店<br>员工：所在部门<br>业主：所在物业            | 
                                                     
**响应说明**
+ **响应参数说明**

| 参数      | 必须 | 类型   | 长度 | 说明       |
|:----------|:-----|:-------|:-----|:-----------|
| agentGUID | 是   | string | 64   | 经纪人GUID |

##4.3. 客户类接口

###4.3.1. G-CU-01客户查询鉴定（cst_identify）

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：客户信息查询(cst_get_info)
			       跟进查询(cst_get_follow_list)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数     | 必须 | 类型   | 长度 | 说明                       |
|:---------|:-----|:-------|:-----|:---------------------------|
| mobile   | 是   | string | 64   | 手机                       |
| projGUID | 否   | string | 300  | 项目编号，主要面向地产行业 |
| cardId   | 否   | string | 300  | 身份证                     |

**响应说明**
+ **响应参数说明**

| 参数               | 必须       | 类型   | 长度 | 说明           |
|:-------------------|:-----------|:-------|:-----|:---------------|
| exist              | 是         | int    | 10   | 客户是否存在：<br>1 是<br>0 否            |                                                                                                             
| identitys          | 存在时必须 | array  |      | 客户身份列表:<br>20101 曾经业主<br>20102 当前业主<br>20103 租客<br>20201 会员<br>20301 经纪人<br>20302 置业顾问<br>20401 员工<br>20402 房产员工<br>20501 供应商<br>20502 企业客户  |                                                   
| list               | 存在时必须 | array  |      | 跟进记录       |
| list/followTime    | 是         | string | 64   | 跟进时间       |
| list/followType    | 是         | int    | 10   | 跟进类别：<br>1 预约<br>2 来电<br>3 到访<br>4 认筹<br>5 认购<br>6 签约<br>7 回款<br>8 其它          |                                               
| list/followContent | 是         | string | 64   | 跟进内容       |

###4.3.2. P-CU-02客户主档合并（cst_merge）

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：客户主档合并(cst_merge)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数           | 必须 | 类型 | 长度 | 说明                            |
|:---------------|:-----|:-----|:-----|:--------------------------------|
| droppedCstGUID | 是   | long | 10   | 客户1的ID，即合并后丢弃不用的ID |
| retainCstGUID  | 是   | long | 10   | 客户2的ID，即合并后保留使用的ID |

**响应说明**
+ **响应参数说明**

| 参数    | 必须 | 类型   | 长度 | 说明                       |
|:--------|:-----|:-------|:-----|:---------------------------|
| cstGUID | 是   | long   | 10   | 合并后保留的客户ID         |
| cstName | 否   | string | 64   | 客户名称                   |
| cardId  | 否   | string | 64   | 身份证                     |
| mobile  | 否   | string | 64   | 手机，多个手机，以逗号分割 |
| address | 否   | string | 64   | 地址                       |
| batchNo | 否   | string | 64   | 本次合并的批次号,暂不支持  |

###4.3.3. P-CU-03客户资料新增（cst_create）

**接口说明**
+ **功能描述**
新增业务客户而非主档客户；
主档客户的三个来源：
	1. 经纪人上报的客户；
	2. 案场上报的新客户，数据中心需要先新增主档，再新增地产客户；
	3. 第三方系统抽取到数据中心的源客户数据，数据中心不存在的客户，会新增主档；
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：地产客户上报（cst_estate_create_info）
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数              | 必须 | 类型   | 长度 | 说明                              |
|:------------------|:-----|:-------|:-----|:----------------------------------|
| cstName           | 是   | string | 64   | 客户姓名/企业名称                 |
| gender            | 是   | int    | 10   | 性别<br>1 男<br>2 女<br>企业客户上报时传:0 |
| birthDate         | 否   | string | 64   | 生日                              |
| cstType           | 是   | int    | 10   | 客户类型:<br>1 个人<br>2 公司     |                    
| certType          | 否   | int    | 4    | 证件类型：<br>1 身份证<br>2 军官证<br>3 护照<br>4 港澳通行证<br>5 台湾通行证<br>6 台湾身份证<br>7 港澳身份证<br>8 营业执照<br>9 组织机构码<br>10 税务登记证<br>9999 其他                          |                                                                   
| cardID            | 否   | string | 128  | 证件号码                          |
| mobileTel         | 是   | string | 64   | 手机/联系电话                     |
| officeTel         | 否   | string | 64   | 办公电话                          |
| homeTel           | 否   | string | 64   | 家庭电话                          |
| address           | 否   | string | 100  | 通信地址/公司地址                 |
| backupTel1        | 否   | string | 64   | 备用号码1                         |
| backupTel2        | 否   | string | 64   | 备用号码2                         |
| backupTel3        | 否   | string | 64   | 备用号码3                         |
| backupTel4        | 否   | string | 64   | 备用号码4                         |
| corporationPerson | 否   | string | 64   | 企业法人                          |
| corporationMobile | 否   | string | 64   | 法人联系电话                      |
| firstContact      | 否   | string | 64   | 首选联系人                        |
| corporationScale  | 否   | string | 64   | 企业规模                          |
| projGUID          | 是   | String | 64   | 项目ID                            |

**响应说明**
+ **响应参数说明**

| 参数    | 必须 | 类型   | 长度 | 说明       |
|:--------|:-----|:-------|:-----|:-----------|
| cstGUID | 否   | string | 64   | 成功时返回 |

###4.3.4. P-CU-04客户资料更新（cst_update）

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：地产客户更新（cst_estate_update_info）
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数              | 必须 | 类型     | 长度 | 说明              |
|:------------------|:-----|:---------|:-----|:------------------|
| cstGUID           | 是   | string   | 64   | 客户编号          |
| cstName           | 是   | string   | 64   | 客户姓名/企业名称 |
| gender            | 是   | int      | 10   | 性别              |
| birthDate         | 否   | datetime |      | 生日              |
| cstType           | 否   | int      | 10   | 客户类型：<br>1 个人<br>2 公司             |                                                                                                            
| officeTel         | 否   | string   | 64   | 办公电话          |
| homeTel           | 否   | string   | 64   | 家庭电话          |
| address           | 否   | string   | 64   | 通信地址/公司地址 |
| projGUID          | 是   | string   | 64   | 项目编号          |
| cardType          | 否   | int      | 10   | 证件类型          |
| cardID            | 否   | string   | 128  | 证件号码          |
| userId            | 是   | string   | 64   | 业务员，即登记人  |
| backupTel1        | 否   | string   | 64   | 备用号码1         |
| backupTel2        | 否   | string   | 64   | 备用号码2         |
| backupTel3        | 否   | string   | 64   | 备用号码3         |
| backupTel4        | 否   | string   | 64   | 备用号码4         |
| corporationPerson | 否   | string   | 64   | 企业法人          |
| corporationMobile | 否   | string   | 64   | 法人联系电话      |
| firstContact      | 否   | string   | 64   | 首选联系人        |
| corporationScale  | 否   | string   | 64   | 企业规模          |

**响应说明**
+ **响应参数说明**

| 参数    | 必须 | 类型   | 长度 | 说明     |
|:--------|:-----|:-------|:-----|:---------|
| cstGUID | 是   | string | 64   | 客户编号 |

###4.3.5. P-CU-05客户手机新增（cst_mobile_add）

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：地产客户新增手机（cst_estate_create_mobile）
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数     | 必须 | 类型   | 长度 | 说明                     |
|:---------|:-----|:-------|:-----|:-------------------------|
| cstGUID  | 是   | long   | 10   | 客户id                   |
| mobile   | 是   | string | 64   | 手机                     |
| type     | 否   | int    | 10   | <font color="red">（暂不支持）</font><br/>号码类型，不填默认为手机<br>1 手机<br>2 家庭电话<br>3 办公电话                |                                                                                                                                         
| userId   | 否   | string | 64   | <font color="red">（暂不支持）</font><br/>业务员，即登记人         |

**响应说明**
+ **响应参数说明**

| 参数    | 必须 | 类型 | 长度 | 说明   |
|:--------|:-----|:-----|:-----|:-------|
| cstGUID | 是   | long | 10   | 客户id |

###4.3.6. P-CU-06客户手机更新（cst_mobile_update）

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：地产客户更新手机（cst_estate_update_mobile）
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数     | 必须 | 类型   | 长度 | 说明                     |
|:---------|:-----|:-------|:-----|:-------------------------|
| cstGUID  | 是   | long   | 10   | 客户id                   |
| mobile   | 是   | string | 64   | 手机                     |
| type     | 否   | int    | 10   | <font color="red">（暂不支持）</font><br/>号码类型，不填默认为手机<br>1 手机<br>2 家庭电话<br>3 办公电话                |                                                                                                                                         
| userId   | 否   | string | 64   | <font color="red">（暂不支持）</font><br/>业务员，即登记人         |

**响应说明**
+ **响应参数说明**

| 参数    | 必须 | 类型 | 长度 | 说明   |
|:--------|:-----|:-----|:-----|:-------|
| cstGUID | 是   | long | 10   | 客户id |

###4.3.7. G-CU-07客户资料查询（cst_query）

**接口说明**
+ **功能描述**
cstType=1（默认）：查主档客户信息；
cstType=2：查业务客户信息；
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：客户信息查询(cst_get_info)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数    | 必须 | 类型   | 长度 | 说明             |
|:--------|:-----|:-------|:-----|:-----------------|
| mobile  | 是   | string | 64   | 手机             |
| cardId  | 否   | string | 64   | 身份证           |
| cstType | 否   | int    | 4    | 客户类型：<br>1 个人（默认值）<br> 2 公司    |   
| cstGUID | 否   | string | 64   | 客户编号         |

**响应说明**
+ **响应参数说明**

| 参数              | 必须 | 类型   | 长度 | 说明              |
|:------------------|:-----|:-------|:-----|:------------------|
| cstGUID           | 是   | string | 64   | 客户编号          |
| cstName           | 是   | string | 64   | 客户姓名/企业名称 |
| gender            | 是   | int    | 10   | 性别 1 男 2女     |
| birthDate         | 否   | string | 64   | 生日              |
| cstType           | 是   | int    | 10   | 客户类型：<br>1 个人<br>2 公司 |                                          
| cardType          | 是   | int    | 10   | 证件类型          |
| cardID            | 否   | string | 128  | 证件号码          |
| mobileTel         | 是   | string | 64   | 手机/联系电话     |
| officeTel         | 否   | string | 64   | 办公电话          |
| homeTel           | 否   | string | 64   | 家庭电话          |
| sourceBiz         | 否   | string | 64   | 来源业态          |
| activitySource    | 否   | string | 64   | 媒体活动          |
| address           | 否   | string | 100  | 住址/公司地址     |
| backupTel1        | 否   | string | 64   | 备用号码1         |
| backupTel2        | 否   | string | 64   | 备用号码2         |
| backupTel3        | 否   | string | 64   | 备用号码3         |
| backupTel4        | 否   | string | 64   | 备用号码4         |
| corporationPerson | 否   | string | 64   | 企业法人          |
| corporationMobile | 否   | string | 64   | 法人联系电话      |
| firstContact      | 否   | string | 64   | 首选联系人        |
| corporationScale  | 否   | string | 64   | 企业规模          |

###4.3.8. P-CU-08客户描摹上报（cst_attach_create）

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：描摹上报(cst_create_attribute_v2)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数                         | 必须 | 类型     | 长度 | 说明                                          |
|:-----------------------------|:-----|:---------|:-----|:----------------------------------------------|
| cstGUID                      | 是   | string   | 64   | 客户ID                                        |
| oppGUID                      | 否   | string   | 64   | 机会编号<font color="red">(暂不支持)</font>        |
| userGUID                     | 是   | string   | 32   | 业务员编号                                    |
| attachs                      | 是   | array    |      | 特征列表                                      |
| attachs/scopeGUID            | 是   | string   | 64   | 范围对象编号，例如：<br>attachLevel=4,scopeGUID取值为项目编号<br>attachLevel=16,scopeGUID取值为公司编号<br />attachLevel=0，为集团级   |                                                                                
| attachs/attachGUID           | 是   | string   | 64   | 特征编号                                      |
| attachs/items                | 是   | array    |      | 特征项列表                                    |
| attachs/items/itemGUID       | 否   | string   | 64   | 候选项编号（手动输入时为空）           |
| attachs/items/itemValue      | 是   | string   | 64   | 特征项值（需判断是预选值或者手动输入值）  |                                                                                                                                                        
| attachs/items/parentItemGUID | 否   | string   | 64   | 父级特征项编号（手动输入时为空）         |
| attachs/items/remark         | 否   | string   | 2000 | 备注                                          |
| attachs/items/expireTime     | 否   | datetime |      | 过期时间，默认为空，表示永不过期              |
| attachs/items/sourceChannel  | 否   | string   | 16   | 来源渠道                                      |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

##4.4.	销售跟进类接口

###4.4.1. P-FR-01客户推荐上报(agent_recommend)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：新增客户推荐(s_create_recommend)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数           | 必须 | 类型   | 长度 | 说明                                          |
|:---------------|:-----|:-------|:-----|:----------------------------------------------|
| agentGUID      | 是   | string | 64   | 经纪人ID                                      |
| cstName        | 是   | string | 64   | 客户姓名                                      |
| cstMobile      | 是   | string | 64   | 客户手机号码                                  |
| cstMobile2     | 否   | string | 64   | 备用手机号码,备用号码只作为查看地和联系使用，<br>不参与任何业务逻辑处理                         |                                       
| projGUID       | 是   | string | 64   | 项目code                                      |
| productType    | 是   | string | 64   | 产品品类                                      |
| proxyCompanyId | 否   | string | 64   | 代理公司ID                                    |
| consultantId   | 否   | string | 64   | 置业顾问ID                                    |
| remark         | 否   | string | 64   | 备注                                          |
| appointTime    | 否   | string | 64   | 预约上门时间                                  |
| gender         | 否   | int    | 10   | 1男 2 女                                      |
| prizeRule      | 否   | string | 64   | 对结佣规则的描述                              |
| isAccompany    | 是   | int    | 10   | 是否陪同上门：<br>1 是<br>0 否                                           |                                                                                                                                                            
| recommendTime  | 是   | string | 64   | 上报时间，格式：*YYYY-MM-dd HH:mm&#58;ss*               |
| expireTime     | 否   | string | 64   | 过期时间，格式：*YYYY-MM-dd HH:mm&#58;ss*           |
| enable         | 是   | int    | 10   | 推荐状态1：有效0：无效                        |
| cardType       | 否   | int    | 10   | 证件类型(暂不支持)                            |
| cardID         | 否   | string | 64   | 证件号码(暂不支持)                            |

**响应说明**
+ **响应参数说明**

| 参数    | 必须 | 类型   | 长度 | 说明                             |
|:--------|:-----|:-------|:-----|:---------------------------------|
| cstGUID | 否   | string | 64   | 成功后返回客户在数据中心的唯一ID |
| leadID  | 否   | string | 64   | 成功后返回对应推荐线索的ID       |

###4.4.2. P-FR-02线索上报(sale_lead_create)

**接口说明** <font color='red'>（非标准版接口，暂未实现）</font>
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：新增销售线索(s_create_sales_lead)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数         | 必须 | 类型     | 长度 | 说明                                        |
|:-------------|:-----|:---------|:-----|:--------------------------------------------|
| projGUID     | 是   | string   | 64   | 项目编号                                    |
| consultantId | 是   | string   | 64   | 置业顾问编号                                |
| cstName      | 是   | string   | 64   | 客户姓名                                    |
| cstTel       | 是   | string   | 64   | 客户电话                                    |
| cstType      | 是   | string   | 32   | 客户类型：个人/公司                         |
| cstGender    | 是   | int      | 2    | 客户性别：<br>1 男<br>2 女<br>0 未知        |
| description  | 否   | string   | 64   | 备注                                        |
| leadSource   | 是   | string   | 32   | 来源：来访/微信预约/来电/其他               |
| topic        | 是   | string   | 200  | 主题                                        |
| cognizeAve   | 否   | string   | 64   | 认知途径                                    |
| appointTime  | 否   | datetime | 32   | 预约时间, 格式:*YYYY-MM-dd HH:mm&#58;ss*    |
| leadType     | 否   | String   | 32   | 类型：天使/微信使用signguid，默认微信       |

**响应说明**
+ **响应参数说明**

| 参数     | 必须       | 类型   | 长度 | 说明     |
|:---------|:-----------|:-------|:-----|:---------|
| leadGUID | 成功时必须 | string | 64   | 线索guid |

###4.4.3. P-FR-03推荐状态更新(agent_recommend_update)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：推荐更新接口(s_update_recommend)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数       | 必须 | 类型   | 长度 | 说明                                |
|:-----------|:-----|:-------|:-----|:------------------------------------|
| leadID     | 是   | string | 64   | 经纪人ID                            |
| status     | 是   | int    | 10   | 0=无效1=有效                        |
| remark     | 是   | string | 64   | 状态原因                            |
| expireTime | 否   | string | 64   | 过期时间，格式：*YYYY-MM-dd HH:mm&#58;ss* |

**响应说明**
+ **响应参数说明**

| 参数   | 必须 | 类型   | 长度 | 说明     |
|:-------|:-----|:-------|:-----|:---------|
| leadID | 是   | string | 64   | 经纪人ID |

###4.4.4. P-FR-04客户预约上报(sale_appoint)

**接口说明**
+ **功能描述：**
<font color='red'>暂不支持</font>
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：新增客户预约(s_create_appoint)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数        | 必须 | 类型   | 长度 | 说明         |
|:------------|:-----|:-------|:-----|:-------------|
| mobile      | 是   | string | 64   | 客户手机     |
| cstName     | 是   | string | 64   | 客户姓名     |
| appointTime | 是   | string | 64   | 预约看房时间 |
| projGUID    | 是   | string | 64   | 项目code     |
| userGUID    | 否   | string | 64   | 置业顾问ID   |
| appintType  | 是   | int    | 10   | 预约类型：<br>1 主动<br>2 被动预约    |                                                                                    
| remark      | 是   | string | 64   | 备注说明     |

**响应说明**
+ **响应参数说明**

| 参数        | 必须 | 类型   | 长度 | 说明               |
|:------------|:-----|:-------|:-----|:-------------------|
| appointCode | 否   | string | 64   | 预约号，成功时返回 |

###4.4.5. P-FR-05机会新增（sale_opp_create）

**接口说明**
+ **功能描述**
如果userGUID不为空，则服务接口会写机会分配表，并触发分配置业顾问通知
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：新增销售机会(s_create_opp)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数         | 必须 | 类型   | 长度 | 说明             |
|:-------------|:-----|:-------|:-----|:-----------------|
| cstGUID      | 是   | string | 64   | 客户ID           |
| userGUID     | 是   | string | 64   | 当前置业顾问帐号 |
| projGUID     | 是   | string | 64   | 项目编码         |
| leadGUID     | 否   | string | 64   | 线索GUID         |
| oppSource    | 是   | string | 64   | 机会来源         |
| probability  | 否   | int    | 10   | 意向等级：<br>1 A级<br>2 B级<br>3 C级<br>4 D级 |                                                                                                                                                                                               
| status       | 否   | string | 64   | 状态：<br>0 新增（默认值）<br>101 关闭<br>102 激活 |                       
| statusReason | 是   | string | 64   | 状态原因         |
| statusTime   | 是   | string | 64   | 状态日期         |
| visitStatus  | 否   | int 	  | 10   | 到访状态：0=未到访  1=已到访         |
| tradeStatus  | 否   | int 	  | 10   | 成交状态：<br />3=到访<br />4=认筹<br />5=认购<br />6=签约<br />7=回款<br />8=其他   |


**响应说明**
+ **响应参数说明**

| 参数    | 必须 | 类型   | 长度 | 说明                     |
|:--------|:-----|:-------|:-----|:-------------------------|
| oppGUID | 否   | string | 64   | 销售机会GUID，成功时返回 |

###4.4.6. P-FR-06机会更新 （sale_opp_update）

**接口说明**
+ **功能描述**
如果userGUID不为空，则服务接口会更新机会分配表，并触发分配置业顾问通知
+ **应用方(适应系统)：**
案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：更新销售机会(s_update_opp)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数         | 必须 | 类型   | 长度 | 说明             |
|:-------------|:-----|:-------|:-----|:-----------------|
| leadGUID     | 否   | string | 64   | 线索GUID         |
| oppGUID      | 是   | string | 64   | 机会GUID         |
| userGUID     | 是   | string | 64   | 置业顾问GUID         |
| projGUID     | 是   | string | 64   | 项目GUID         |
| cstGUID      | 否   | string | 64   | 客户GUID <font color="red">(暂不支持)</font>    |
| oppSource    | 否   | string | 64   | 机会来源         |
| probability  | 是   | int    | 64   | 意向等级：<br>1 A级<br>2 B级<br>3 C级<br>4 D级             |                                            
| status       | 是   | int    | 64   | 状态：<br>0 新增（默认值）<br>102 激活          |           
| statusReason | 否   | string | 64   | 状态原因         |
| statusTime   | 否   | string | 64   | 状态时间，格式：*YYYY-MM-dd HH:mm&#58;ss*         |
| visitStatus  | 否   | int 	  | 10   | 到访状态：0=未到访  1=已到访         |
| tradeStatus  | 否   | int 	  | 10   | 成交状态：<br />3=到访<br />4=认筹<br />5=认购<br />6=签约<br />7=回款<br />8=其他   |


**响应说明**
+ **响应参数说明**

| 参数    | 必须 | 类型   | 长度 | 说明     |
|:--------|:-----|:-------|:-----|:---------|
| oppGUID | 是   | string | 64   | 机会GUID |

###4.4.7. P-FR-07机会合并(sale_opp_merge)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：销售机会合并(s_merge_opp)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数           | 必须 | 类型   | 长度 | 说明                            |
|:---------------|:-----|:-------|:-----|:--------------------------------|
| droppedOppGUID | 是   | string | 64   | 机会1的ID，即合并后丢弃不用的ID |
| retainOppGUID  | 是   | string | 64   | 机会2的ID，即合并后保留使用的ID |

**响应说明**
+ **响应参数说明**

| 参数    | 必须 | 类型 | 长度 | 说明               |
|:--------|:-----|:-----|:-----|:-------------------|
| oppGUID | 是   | long | 10   | 合并后保留的机会ID |

###4.4.8. P-FR-08分配置业顾问上报(sale_opp_assign)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：新增机会分配(s_create_opp_assign)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数       | 必须 | 类型   | 长度 | 说明                                |
|:-----------|:-----|:-------|:-----|:------------------------------------|
| cstGUID    | 是   | long   | 10   | 客户GUID                              |
| oppGUID    | 是   | string | 64   | 机会GUID                                |
| projGUID   | 是   | string | 64   | 项目GUID                            |
| modifyBy   | 是   | string | 64   | 修改人（置业顾问编号）              |
| userGUID   | 是   | string | 64   | 置业顾问GUID                        |
| userType   | 是   | int    | 10   | 修改人的置业顾问类型：1置业顾问     |
| assignType | 是   | int    | 10   | 分配方式：<br>1 自动轮巡<br>2 手动分配<br>3 自主抢客<br>4 转交 |                             
| remark     | 否   | string | 64   | 备注说明                            |
| assignTime | 是   | string | 64   | 分配时间，格式：*YYYY-MM-dd HH:mm&#58;ss* |

**响应说明**
+ **响应参数说明**

| 参数       | 必须 | 类型   | 长度 | 说明     |
|:-----------|:-----|:-------|:-----|:---------|
| assignGUID | 是   | string | 64   | 分配标识 |

###4.4.9. P-FR-09机会流失(sale_opp_lose)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：销售机会流失(s_lose_opp)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数         | 必须 | 类型   | 长度 | 说明       |
|:-------------|:-----|:-------|:-----|:-----------|
| oppGUID      | 是   | string | 64   | 机会       |
| statusReason | 是   | string | 64   | 流失原因   |
| statusTime   | 是   | string | 64   | 流失时间   |
| statusType   | 是   | int    | 10   | 流失方式：<br>1 自动流失<br>2 人工流失  |                                                                                
| userGUID（<font color="red">暂不支持</font>）     | 否   | string | 64   | 流失人     |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.4.10. G-FR-10机会查询（sale_opp_query）

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：查询销售机会(s_get_opp)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数     | 必须 | 类型   | 长度 | 说明     |
|:---------|:-----|:-------|:-----|:---------|
| cstGUID  | 否，oppGUID不存在时必须   | string | 64   | 客户ID   |
| oppGUID  | 否 | int    | 10   | 机会编号 |
| projGUID | 否，oppGUID不存在时必须   | string | 64   | 项目编码 |

**响应说明**
+ **响应参数说明**

| 参数            | 必须 | 类型   | 长度 | 说明         |
|:----------------|:-----|:-------|:-----|:-------------|
| oppGUID         | 是   | string | 64   | 机会编号     |
| cstGUID         | 是   | string | 64   | 客户编号     |
| companyGUID     | 是   | string | 64   | 公司GUID     |
| projGUID        | 是   | string | 64   | 项目编码     |
| leadGUID        | 否   | string | 64   | 线索GUID     |
| oppSource       | 否   | string | 64   | 机会来源     |
| cognizePath     | 否   | string | 64   | 认知途径     |
| process         | 否   | string | 64   | 跟进阶段     |
| estRevenue      | 否   | string | 64   | 估计价值     |
| probability     | 是   | int    | 10   | 意向等级：<br>1 A级<br>2 B级<br>3 C级<br>4 D级 |                                        
| estCloseDate    | 否   | string | 64   | 估计关闭日期 |
| followLevel     | 否   | string | 64   | 跟进级别     |
| visitStatus     | 否   | int    | 10   | 到访状态     |
| tradeStatus     | 否   | int    | 10   | 成交状态     |
| status          | 否   | int    | 10   | 状态         |
| statusReason    | 否   | string | 64   | 状态原因     |
| statusTime      | 否   | string | 64   | 状态日期     |
| competitor      | 否   | string | 64   | 竞争对手     |
| realTotal       | 否   | string | 64   | 实际价值     |
| description     | 否   | string | 64   | 描述         |
| partnerGUIDList | 否   | string | 64   | 拍档列表     |

###4.4.11. P-FR-11客户预约取消(sale_appoint_cancel)

**接口说明**
+ **功能描述：**
<font color='red'>暂不支持</font>
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：取消预约(s_cancel_appoint)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数         | 必须 | 类型   | 长度 | 说明     |
|:-------------|:-----|:-------|:-----|:---------|
| appointCode  | 是   | string | 64   | 预约号   |
| cancelReason | 是   | string | 64   | 取消原因 |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.4.12. P-FR-12跟进上报(sale_follow_create)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：新增跟进(cst_create_follow)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数              | 必须 | 类型   | 长度 | 说明                    |
|:------------------|:-----|:-------|:-----|:------------------------|
| cstGUID           | 是   | int    | 10   | 客户ID                  |
| projGUID          | 是   | string | 64   | 项目编号                |
| type              | 是   | int    | 10   | 类型：<br>1 线索跟进<br>2 机会跟进|                                                                                                                        
| rate              | 是   | int    | 10   | 意向等级：<br>1 A级<br>2 B级<br>3 C级<br>4 D级                    |              
| oppGUID           | 是   | string | 64   | 销售机会GUID            |
| followDate        | 是   | string | 64   | 跟进时间                |
| userGUID          | 是   | string | 64   | 置业顾问GUID            |
| followType        | 是   | int    | 10   | 跟进类型:<br>1 预约<br>2 来电<br>2001 首次来电(暂不支持)<br>2002 多次来电(暂不支持)<br>3 到访<br>3001 首次到访(暂不支持)<br>3002 多次到访(暂不支持)<br>4 认筹<br>5 认购<br>6 签约<br>7 回款<br>8 其它<br>09 转机会<br>21 入伙                  |                                                        
| followContent     | 否   | string | 64   | 跟进内容                |
| nextFollowTime    | 否   | string | 64   | 下次跟进时间            |
| nextFollowContnet | 否   | string | 64   | 下次跟进内容            |
| activitySource    | 否   | string | 64   | 媒体活动                |
| remark            | 否   | string | 64   | 备注                    |

**响应说明**
+ **响应参数说明**

| 参数           | 必须       | 类型   | 长度 | 说明           |
|:---------------|:-----------|:-------|:-----|:---------------|
| followRecordID | 成功时必须 | string | 64   | 跟进的唯一标识 |

###4.4.13. P-FR-13机会关联人新增 (sale_opp2cst_create)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：机会客户关系上报(sale_opp2cst_create)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数    | 必须 | 类型   | 长度 | 说明     |
|:--------|:-----|:-------|:-----|:---------|
| oppGUID | 是   | string | 64   | 机会编号 |
| cstGUID | 是   | string | 64   | 客户编号 |

**响应说明**
+ **响应参数说明**

| 参数     | 必须       | 类型 | 长度 | 说明         |
|:---------|:-----------|:-----|:-----|:-------------|
| priority | 成功时必须 | int  | 10   | 客户优先级：<br>第一个客户0<br>第二个客户1<br>依次类推      |                                      

###4.4.14. P-FR-14销售机会拍档更新(opp_partner_update)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：更新销售机会拍档(s_update_opp_partner)
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数     | 必须 | 类型   | 长度 | 说明                         |
|:---------|:-----|:-------|:-----|:-----------------------------|
| partners | 否   | string | 300  | 跟进拍档，多个用英文逗号分隔 |
| oppGUID  | 是   | string | 64   | 机会GUID                     |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

##4.5. 通知类接口

###4.5.1. N-CU-01客户状态通知(cst_status_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：该接口的状态指的是客户被推荐之后的客户跟进状态（来电、来访、认筹、认购等等），从源系统抽取跟进到数据中心时触发该通知
> 消息类型：*dc.mq.cst.status*

**请求说明**
+ **请求参数说明**

| 参数              | 必须 | 类型   | 长度 | 说明                                                                                              |
|:------------------|:-----|:-------|:-----|:--------------------------------------------------------------------------------------------------|
| cstGUID           | 是   | string | 64   | 客户ID                                                                                            |
| projGUID          | 是   | string | 64   | 项目编号                                                                                          |
| oriProjGUID       | 是   | string | 64   | 原始项目编号，即如果存在项目映射配置时，projGUID是转换后的推广项目，oriProjGUID指转换前的项目编号 |
| followTime        | 是   | string | 64   | 跟进时间:*YYYY-MM-dd HH:mm&#58;ss*                                                                |
| followType        | 是   | int    | 10   | 跟进类型：<br>1 预约<br>2 来电<br>2001 首次来电(暂不支持)<br>2002 多次来电(暂不支持)<br>3 到访<br>3001 首次到访(暂不支持)<br>3002 多次到访(暂不支持)<br>4 认筹<br>5 认购<br>6 签约<br>7 回款<br>8 其它<br>09 转机会<br>21 入伙<br>220 退筹<br>230 认购退房<br>231 认购作废<br>232 认购变更<br>233 认购换房<br>234 认购变价<br>235 认购变更付款方案<br>240 签约退房<br>241 签约作废<br>242 签约变更<br>243 签约换房<br>244 签约变价<br>245 签约变更付款方案<br>30 已交楼<br>31 产权出证<br>32 已入伙<br>33 跟踪<br>34 投诉|                                                                                                                                  
| followContent     | 否   | string | 64   | 跟进内容                                                                                          |
| nextFollowTime    | 否   | string | 64   | 下次跟进时间:*YYYY-MM-dd HH:mm&#58;ss*                                                            |
| nextFollowContent | 否   | string | 64   | 下次跟进内容                                                                                      |
| money             | 是   | double |      | 认筹、认购或签约等成交类的金额                                                                    |
| room              | 否   | object |      | 认购、签约等成交时的房产                                                                          |
| room/roomGUID     | 是   | string | 64   | 房间GUID                                                                                          |
| room/huxing       | 是   | string | 64   | 户型                                                                                              |
| room/roomNo       | 是   | string | 64   | 房号                                                                                              |
| room/houseType    | 是   | string | 64   | 产品类型(业态代码)                                                                                |
| followRecordID    | 是   | string | 64   | 唯一编号                                                                                          |
| sourceApp         | 是   | string | 64   | 系统来源                                                                                          |
| activitySource    | 否   | string | 64   | 媒体活动                                                                                          |
| remark            | 否   | string | 64   | 备注                                                                                              |
| userGUID          | 否   | string | 64   | 置业顾问                                                                                          |
| rate              | 否   | int    | 10   | 意向等级：<br>1 A级<br>2 B级<br>3 C级<br>4 D级                                                    |                                                                                        
                                                                                                                                          
                                                                                                                                          
                                                                                                                                          
                                            

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.2. N-CU-02客户主档资料变更通知(cst_info_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场、经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：当主档客户信息发生变化，要实时通知到经纪人或案场，数据中心在新增/更新主档客户时触发该通知
> 消息类型：*dc.mq.cst.update*

**请求说明**
+ **请求参数说明**

| 参数              | 必须 | 类型   | 长度 | 说明                                              |
|:------------------|:-----|:-------|:-----|:--------------------------------------------------|
| cstGUID           | 是   | string | 64   | 客户ID                                            |
| cstName           | 是   | string | 64   | 客户姓名                                          |
| gender            | 是   | int    | 10   | 性别：<br>1 男<br>2 女<br>3 未知                  |                                                                           
| birthDate         | 否   | string | 64   | 生日：*YYYY-MM-dd HH:mm&#58;ss*                   |
| cstType           | 是   | int    | 10   | 客户类型：<br>1 个人<br>2 公司                    |                                                                                
| mobileTel         | 否   | string | 64   | 手机                                              |
| officeTel         | 否   | string | 64   | 办公电话                                          |
| homeTel           | 否   | string | 64   | 家庭电话                                          |
| sourceApp         | 是   | string | 64   | 系统来源                                          |
| cardType          | 否   | int    | 10   | 证件类型                                          |
| cardID            | 否   | string | 128  | 证件号码                                          |
| userGUID          | 否   | string | 64   | 业务员（新客户是对应登记人、老客户是 对应修改人） |
| address           | 否   | string | 64   | 地址                                              |
| backupTel1        | 否   | string | 64   | 备用号码1                                         |
| backupTel2        | 否   | string | 64   | 备用号码2                                         |
| backupTel3        | 否   | string | 64   | 备用号码3                                         |
| backupTel4        | 否   | string | 64   | 备用号码4                                         |
| corporationPerson | 否   | string | 64   | 企业法人                                          |
| corporationMobile | 否   | string | 64   | 法人联系电话                                      |
| firstContact      | 否   | string | 64   | 首选联系人                                        |
| corporationScale  | 否   | string | 64   | 企业规模                                          |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.3. N-CU-03客户资料合并通知(cst_merge_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场、经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：
+ **消息流(触发异步消息)**
> 消息来源：数据中心将客户合并时，客户uniGUID将随之变化，数据中心合并客户时产生通知
> 消息类型：*dc.mq.cst.merge*

**请求说明**
+ **请求参数说明**

| 参数      | 必须 | 类型   | 长度 | 说明                          |
|:----------|:-----|:-------|:-----|:------------------------------|
| retainCst | 是   | string | 64   | 合并时保留继续使用的客户ID    |
| dropedCst | 是   | string | 64   | 合并时丢弃不再使用的客户ID    |
| mergeTime | 是   | string | 64   | 合并时间：*YYYY-MM-dd HH:mm&#58;ss* |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.4. N-FR-04分配置业顾问通知(opp_assign_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场、经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：1、调用分配置业顾问接口时触发；
> 　　　　　2、新增或更新机会（userGUID不为空时）触发；
> 消息类型：*dc.mq.opp.assign*

**请求说明**
+ **请求参数说明**

| 参数       | 必须 | 类型   | 长度 | 说明                       |
|:-----------|:-----|:-------|:-----|:---------------------------|
| cstGUID    | 是   | long   |      | 客户ID                     |
| oppGUID    | 是   | string | 64   | 机会                       |
| leadGUID   | 否   | string | 64   | 线索编号                   |
| projGUID   | 是   | string | 64   | 项目编号                   |
| userGUID   | 是   | string | 64   | 分配的置业顾问编号         |
| userType   | 是   | int    | 10   | 分配的置业顾问类型         |
| modifyBy   | 是   | string | 64   | 修改人(置业顾问编号)       |
| assignType | 是   | int    | 10   | 分配方式：<br>1 自动轮巡<br>2 手动分配<br>3 自主抢客<br>4 转交     |                                                    
| remark     | 否   | string | 64   | 备注说明                   |
| assignTime | 是   | string | 64   | 分配时间: *YYYY-MM-dd HH:mm&#58;ss* |
| sourceApp  | 是   | string | 64   | 系统来源                   |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.5. N-FR-05线索信息通知(lead_info_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场、经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：数据中心新增/更线索时触发
> 消息类型：*dc.mq.cst.lead*

**请求说明**
+ **请求参数说明**

| 参数        | 必须 | 类型     | 长度 | 说明                                                      |
|:------------|:-----|:---------|:-----|:----------------------------------------------------------|
| leadGUID    | 是   | string   | 64   | 销售GUID                                                  |
| projGUID    | 是   | string   | 64   | 项目编号                                                  |
| userId      | 是   | string   | 64   | 置业顾问编号                                              |
| cstName     | 是   | string   | 64   | 客户姓名                                                  |
| cstTel      | 是   | string   | 64   | 客户电话                                                  |
| cstType     | 是   | string   | 32   | 客户类型：个人/公司                                       |
| cstGender   | 是   | int      | 2    | 客户性别：<br>1 男<br>2 女<br>0未知                                 |
| leadType    | 是   | String   | 32   | 类型：天使/微信使用signguid                               |
| description | 否   | string   | 64   | 备注                                                      |
| leadSource  | 否   | string   | 32   | 来源：大客户拜访/业主拓展/陌生电话拜访/派单/外展/外部资源 |
| topic       | 否   | string   | 200  | 主题                                                      |
| cognizeAve  | 否   | string   | 64   | 认知途径                                                  |
| appointTime | 否   | datetime | 32   | 预约时间, 格式”yyyy-MM-dd HH:mm:ss\[.SSS\]”               |
| status      | 是   | string   | 32   | 状态                                                      |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.6. N-FR-06客户推荐通知（agent_recommend_notify）

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：客户推荐上报接口触发
> 消息类型：*dc.mq.cst.recommend*

**请求说明**
+ **请求参数说明**

| 参数           | 必须 | 类型   | 长度 | 说明                                                                 |
|----------------|------|--------|------|----------------------------------------------------------------------|
| leadID         | 是   | string | 64   | 线索GUID                                                             |
| agentGUID      | 是   | string | 64   | 经纪人ID                                                             |
| agentClasses   | 是   | int    | 10   | 经纪人类别：<br>1 合作方<br>2 中介公司<br>3 业主<br>4 非房产员工<br>5 外部代理公司<br>6 独立经纪人<br>7 企业用户<br>8 无佣金经纪人   |                                                                                                
| cstName        | 是   | string | 64   | 客户姓名                                                             |
| cstMobile      | 是   | string | 64   | 客户手机号码                                                         |
| cstMobile2     | 否   | string | 64   | 备用手机号码, 备用号码只作为查看地和联系使用，不参与任何业务逻辑处理 |
| projGUID       | 是   | string | 64   | 项目                                                                 |
| productType    | 是   | string | 64   | 产品品类                                                             |
| proxyCompanyId | 否   | string | 64   | 代理公司ID                                                           |
| consultantId   | 否   | string | 64   | 置业顾问ID                                                           |
| remark         | 否   | string | 64   | 备注                                                                 |
| appointTime    | 否   | string | 64   | 预约上门日期                                                         |
| gender         | 否   | int    | 10   | 性别：<br>1 男<br>2 女 											   |
| prizeRule      | 否   | string | 64   | 对结佣规则的描述                                                     |
| isAccompany    | 是   | int    | 10   | 是否陪同上门：<br>1 是<br>0 否                                       |
| recommendTime  | 是   | string | 64   | 上报时间，*YYYY-MM-dd HH:mm&#58;ss*                                  |
| expireTime     | 否   | string | 64   | 过期时间，*YYYY-MM-dd HH:mm&#58;ss*                                  |
| cstGUID        | 否   | string | 64   | 成功后返回客户在数据中心的唯一ID                                     |
| sourceApp      | 是   | string | 64   | 系统来源                                                             |
| enable         | 是   | int    | 10   | 推荐状态：<br>1：有效<br>0：无效                                     |
| cardType       | 否   | int    | 10   | 证件类型(暂不支持)                                                   |
| cardId         | 否   | string | 128  | 证件号码(暂不支持)                                                   |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.7. N-FR-07客户预约通知（sale_appoint_notify）

**接口说明**
+ **功能描述：**
<font color='red'>暂不支持</font>
+ **应用方(适应系统)：**
案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：客户预约新增上报接口触发
> 消息类型：*dc.mq.cst.appoint*

**请求说明**
+ **请求参数说明**

| 参数        | 必须 | 类型   | 长度 | 说明               |
|:------------|:-----|:-------|:-----|:-------------------|
| mobile      | 是   | string | 64   | 客户手机           |
| cstName     | 是   | string | 64   | 客户姓名           |
| appointTime | 是   | string | 64   | 预约看房时间       |
| projGUID    | 是   | string | 64   | 项目code           |
| userGUID    | 否   | string | 64   | 置业顾问ID         |
| appintType  | 是   | int    | 10   | 预约类型：<br>1 主动<br>2 被动预约  |                                        
| remark      | 是   | string | 64   | 备注说明           |
| appointCode | 否   | string | 64   | 预约号，成功时返回 |
| sourceApp   | 是   | string | 64   | 系统来源           |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.8. N-FR-08推荐状态通知(recommend_status_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：推荐状态更新接口触发
> 消息类型：*dc.mq.recommend.status*

**请求说明**
+ **请求参数说明**

| 参数       | 必须 | 类型   | 长度 | 说明                          |
|:-----------|:-----|:-------|:-----|:------------------------------|
| leadID     | 是   | string | 64   | 线索ID                        |
| status     | 是   | int    | 10   | 状态：<br>0 无效<br>1 有效    |                                                     
| remark     | 是   | string | 64   | 状态原因                      |
| expireTime | 否   | string | 64   | 过期时间，*YYYY-MM-dd HH:mm&#58;ss* |
| sourceApp  | 是   | string | 64   | 系统来源                      |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.9. N-FR-09机会信息通知(sale_opp_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：新增/更新机会时触发
> 消息类型：*dc.mq.opp.update*

**请求说明**
+ **请求参数说明**

| 参数         | 必须 | 类型   | 长度 | 说明             |
|--------------|------|--------|------|------------------|
|oppGUID|是|String|64|机会的guid|
|leadGUID|否|String|64|线索GUID|
|cstGUID|是|int|64|数据中心客户ID|
|projGUID|是|String|64|项目code|
|userGUID|是|String|64|置业顾问ID UserGUID|
|sourceType|是|String|64|客户来源（来电、来访、预约、推荐）OppSource|
|status|是|String|20|状态（登记、丢失、激活、看房、签约、认购、问询、赢得、预约）|
|content|是|String|200|意向说明Description|
|intentLevel|是|int||购房意向 3 高 2 中 1 底（Rating 1冷淡 3密切 2一般）|
|assignDate|是|String|64|分配时间 CreatedOn|
|nextFollowDate|是|datetime|32|下次跟进时间（FaithDate）, 格式”yyyy-MM-dd HH:mm&#58;ss\[.SSS\]”|
|lastFollowDate|是|datetime|32|最后一次跟进时间（ReceiveDate）, 格式”yyyy-MM-dd HH:mm&#58;ss\[.SSS\]”|
|dsReason|否|String|128|丢失原因(StatusReason)|
|yxYeTai|否|String|100|需求业态(IntentHx)|
|yxFangXing|否|String|100|需求户型（BuyHx）|
|yxArea|否|String|100|需求面积<br/>BuyMj~BuyMjOn，需要判断过滤以下数据：0.00 NULL|
|gfyt|否|String|100|购房用途（BuyPurpose）|
|isLocalHouseHold|是|int|10|是否本地户口  0:否 1:是(其他都填否)|
|socialSecurityYear|是|int|10|社保年数|
|dsDate|否|datetime|32|丢失时间（ClosedOn关闭日期）, 格式”yyyy-MM-dd HH:mm&#58;ss\[.SSS\]”|
|firstCstWill|否|string|64|首次购房意向|
|cstWill|是|string|64|客户意向(单选) 候选项:  A B C D E <br/>A的等级最高|

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.10. N-FR-10客户跟进通知(sale_follow_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：新增客户跟进触发
> 消息类型：*dc.mq.cst.follow*

**请求说明**
+ **请求参数说明**

| 参数              | 必须 | 类型   | 长度 | 说明                                     |
|:------------------|:-----|:-------|:-----|:-----------------------------------------|
| followGUID        | 是   | string | 32   | 跟进编号                                 |
| cstGUID           | 是   | string | 32   | 客户ID                                   |
| projGUID          | 是   | string | 32   | 项目编号                                 |
| oriProjGUID       | 是   | string | 32   | 原始项目编号，即如果存在项目映射配置时，<br>projGUID是转换后的推广项目，<br>oriProjGUID指转换前的项目编号             |
| followTime        | 是   | string | 32   | 跟进时间:*YYYY-MM-dd HH:mm&#58;ss*       |
| followType        | 是   | int    | 32   | 跟进类型：<br>1=预约<br>2=来电<br>3=到访<br>4=认筹<br>8=其它<br>33=跟踪<br>34=投诉  |                                                                          
| followContent     | 否   | string | 32   | 跟进内容                                 |
| nextFollowTime    | 否   | string | 32   | 下次跟进时间:*YYYY-MM-dd HH:mm&#58;ss*   |
| nextFollowContent | 否   | string | 32   | 下次跟进内容                             |
| sourceApp         | 是   | string | 32   | 系统来源                                 |
| activitySource    | 否   | string | 32   | 媒体活动                                 |
| remark            | 否   | string | 32   | 备注                                     |
| userGUID          | 否   | string | 32   | 置业顾问                                 |
| probability       | 否   | int    | 32   | 成交几率：<br>1=A级<br>2=B级<br>3=C级<br>4=D级    |
| oppGUID           | 否   | string | 64   | 机会编号                                 |

-   **响应说明**
**响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|------|------|------|------|------|
|      |      |      |      |      |

###4.5.11. N-FR-11客户交易通知(sale_trade_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场、经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：ETL从第三方系统同步交易数据，上报到数据中心时触发
> 消息类型：*dc.mq.sale.trade*

**请求说明**
+ **请求参数说明**

| 参数         | 必须 | 类型   | 长度 | 说明           |
|--------------|------|--------|------|----------------|
| tradeGUID    | 是   | string | 64   | 交易GUID       |
| roomGUID     | 是   | string | 64   | 房间编号       |
| oppGUID      | 是   | string | 64   | 销售机会GUID   |
| tradeStatus  | 是   | int    | 10   | 最终交易状态：<br>1关闭<br>2激活  |                                                  
| closeReason  | 否   | string | 64   | 关闭原因       |
| orderGUID    | 否   | string | 64   | 认购编号       |
| contractGUID | 否   | string | 64   | 合同编号       |
| userGUID     | 是   | string | 64   | 置业顾问       |
| cstGUID      | 是   | string | 64   | 客户编号       |
| sequence     | 否   | int    | 10   | 序号           |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|------|------|------|------|------|
|      |      |      |      |      |

###4.5.12. N-FR-12客户认购通知(sale_order_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：ETL从第三方系统同步认购数据，上报到数据中心时触发
> 消息类型：*dc.mq.sale.order*

**请求说明**
+ **请求参数说明**

| 参数         | 必须 | 类型     | 长度 | 说明                                 |
|--------------|------|----------|------|--------------------------------------|
| orderGUID    | 是   | string   | 64   | 认购Id                               |
| buGUID       | 否   | string   | 64   | 公司Id                               |
| projGUID     | 是   | string   | 64   | 项目Id                               |
| tradeGUID    | 是   | string   | 64   | 交易Id                               |
| roomGUID     | 否   | string   | 64   | 房间Id                               |
| lastSaleGUID | 否   | string   | 64   | 上次销售单Id                         |
| lastSaleType | 否   | string   | 64   | 上次销售单类型                       |
| qsDate       | 是   | datetime | 32   | 认购日期, 格式为:*YYYY-MM-dd HH:mm&#58;ss* |
| htTotal      | 是   | float    | 32   | 认购总价                             |
| status       | 是   | int      | 10   | 状态：<br>230=认购退房<br>231=认购作废<br>232=认购变更<br>233=认购换房<br>234=认购变价<br>235=认购变更付款方案      |                                                                       
| closeDate    | 否   | datetime | 32   | 关闭日期, 格式为:*YYYY-MM-dd HH:mm&#58;ss* |
| closeReason  | 否   | string   | 64   | 关闭原因                             |
| userGUID     | 是   | string   | 64   | 置业顾问                             |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.13. N-FR-13客户签约通知(sale_contract_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：ETL从第三方系统同步签约数据，上报到数据中心时触发
> 消息类型：*dc.mq.sale.contract*

**请求说明**
+ **请求参数说明**

| 参数         | 必须 | 类型   | 长度 | 说明                                 |
|:-------------|:-----|:-------|:-----|:-------------------------------------|
| contractGUID | 是   | string | 64   | 合同Id                               |
| buGUID       | 否   | string | 64   | 公司Id                               |
| projGUID     | 是   | string | 64   | 项目Id                               |
| tradeGUID    | 是   | string | 64   | 交易Id                               |
| roomGUID     | 否   | string | 64   | 房间Id                               |
| lastSaleGUID | 否   | string | 64   | 上次销售单Id                         |
| lastSaleType | 否   | string | 64   | 上次销售单类型                       |
| qsDate       | 是   | string | 64   | 签约日期, 格式为:*YYYY-MM-dd HH:mm&#58;ss* |
| htTotal      | 是   | string | 64   | 合同总价                             |
| status       | 是   | string | 64   | 状态：<br>240=签约退房<br>241=签约作废<br>242=签约变更<br>243=签约换房<br>244=签约变价<br>245=签约变更付款方案                  |                                        
| closeDate    | 否   | string | 64   | 关闭日期, 格式为:*YYYY-MM-dd HH:mm&#58;ss* |
| closeReason  | 否   | string | 64   | 关闭原因                             |
| userGUID     | 是   | string | 64   | 置业顾问                             |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.14. N-FR-14客户欠款通知(sale_fee_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场、经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：ETL从第三方系统同步欠款数据，上报到数据中心时触发
> 消息类型：*dc.mq.sale.fee*

**请求说明**
+ **请求参数说明**

| 参数        | 必须 | 类型     | 长度 | 说明                                 |
|-------------|------|----------|------|--------------------------------------|
| feeGUID     | 是   | string   | 64   | 应收Id                               |
| tradeGUID   | 是   | string   | 64   | 交易GUID                             |
| flag        | 是   | int      | 10   | 状态标识：<br>1 已付<br>2 未付       |
| itemName    | 是   | string   | 64   | 款项名称                             |
| itemType    | 是   | string   | 64   | 款项类型                             |
| lastDate    | 是   | datetime | 32   | 付款期限, 格式为:*YYYY-MM-dd HH:mm&#58;ss* |
| rmbAmount   | 是   | float    | 32   | 金额                                 |
| rmbDsAmount | 否   | float    | 32   | 多收金额                             |
| rmbYe       | 否   | float    | 32   | 余额                                 |
| sequence    | 否   | int      | 4    | 序号                                 |
| userGUID    | 是   | string   | 64   | 置业顾问                             |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.15. N-FR-15客户回款明细通知(sale_getin_detail_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：ETL从第三方系统同步回款数据，上报到数据中心时触发
> 消息类型：*dc.mq.sale.getin*

**请求说明**
+ **请求参数说明**

| 参数         | 必须 | 类型     | 长度 | 说明                                  |
|:-------------|:-----|:---------|:-----|:--------------------------------------|
| getinGUID    | 是   | string   | 64   | 实收Id                                |
| status       | 是   | int      | 4    | 状态：<br>1 有效<br>2 作废            |                                                                       
| sequence     | 否   | int      | 4    | 序号                                  |
| saleType     | 否   | string   | 64   | 销售单类型                            |
| tradeGUID    | 是   | string   | 64   | 交易GUID                              |
| contractGUID | 是   | string   | 64   | 合同GUID                              |
| rmbAmount    | 是   | float    | 32   | 金额                                  |
| itemType     | 是   | string   | 64   | 款项类型                              |
| itemName     | 是   | string   | 64   | 款项名称                              |
| getForm      | 是   | string   | 64   | 支付方式                              |
| getDate      | 是   | datetime | 32   | 收款日期, 格式为：*YYYY-MM-dd HH:mm&#58;ss* |
| userGUID     | 是   | string   | 64   | 置业顾问                              |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.16. N-FR-16销售进程通知(sale_saleprocess_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：<font color="red">不支持，待确认</font>
> 消息类型：*dc.mq.sale.process*

**请求说明**
+ **请求参数说明**

| 参数           | 必须 | 类型   | 长度 | 说明                            |
|:---------------|:-----|:-------|:-----|:--------------------------------|
| followGUID     | 是   | string | 64   | 跟进编号                        |
| tradeGUID      | 是   | string | 64   | 交易编号                        |
| followTime     | 是   | string | 64   | 跟进时间：*YYYY-MM-dd HH:mm&#58;ss*   |
| followType     | 是   | int    | 64   | 进程类型：<br>30=已交楼<br>31=产权出证<br>32=已入伙    |                                                           
| followContent  | 否   | string | 64   | 跟进内容                        |
| nextFollowTime | 否   | string | 64   | 下次跟进时间:*YYYY-MM-dd HH:mm&#58;ss* |
| sourceApp      | 是   | string | 64   | 系统来源                        |
| remark         | 否   | string | 64   | 备注                            |
| userGUID       | 是   | string | 64   | 置业顾问                        |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.17. N-CU-17客户特征描摹通知(cst_attach_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：客户描摹上报接口触发
> 消息类型：*dc.mq.cst.attach*

**请求说明**
+ **请求参数说明**

| 参数                         | 必须 | 类型      | 长度 | 说明                                           |
|:-----------------------------|:-----|:----------|:-----|:-----------------------------------------------|
| cstGUID                      | 是   | string    | 64   | 客户ID                                         |
| oppGUID                      | 否   | string    | 64   | 机会编号                                       |
| userGUID                     | 是   | string    | 64   | 业务员编号                                     |
| attachs                      | 是   | jsonArray | N/A  | 特征列表                                       |
| attachs/scopeGUID            | 是   | string    | 64   | 范围对象编号，例如：<br>attachLevel=4,scopeGUID取值为项目编号<br>attachLevel=16,scopeGUID取值为公司编号          |                                                                                                                                               
| attachs/attachGUID           | 是   | string    | 64   | 特征编号                                       |
| attachs/items                | 是   | jsonArray | N/A  | 特征项列表                                     |
| attachs/items/itemGUID       | 否   | string    | 64   | 候选项编号，当attach的input=1时为空            |
| attachs/items/itemCode       | 是   | string    | 64   | 两种情况：<br>1、attach的input=1时，取候选项编码 (attachKey)<br>2、否则，则为输入值                             |                                              
| attachs/items/parentItemGUID | 否   | string    | 64   | 父级特征项编号，attach的input=1时为空          |
| attachs/items/remark         | 否   | string    | 200  | 备注                                           |
| attachs/items/expireTime     | 否   | datetime  | 64   | 过期时间，默认为空，表示永不过期               |
| attachs/items/sourceChannel  | 否   | string    | 16   | 来源渠道                                       |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.18. N-US-18置业顾问信息通知(sale_user_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：数据中心新增/更新置业顾问时触发
> 消息类型：*dc.mq.proj.config.user*

**请求说明**
+ **请求参数说明**

| 参数         | 必须 | 类型   | 长度 | 说明                      |
|:-------------|:-----|:-------|:-----|:--------------------------|
| userGUID     | 是   | string | 64   | 用户GUID                  |
| userName     | 是   | string | 64   | 用户名称                  |
| teamGUID     | 是   | string | 64   | 团队编号                  |
| projGUID     | 是   | string | 64   | 所属项目                  |
| attachCode   | 是   | string | 64   | 角色                      |
| status       | 是   | int    | 64   | 状态：<br>0=无效<br>1=有效<br>2=离职                     |                                                       
| statusReason | 是   | string | 64   | 状态原因                  |
| mobile       | 是   | string | 64   | 手机号码                  |
| gender       | 是   | int    | 4    | 性别：<br>0 未知<br>1 男<br>2 女 |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.19. N-BA-19项目特征通知(proj_attach_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：ETL从第三方系统抽取描摹特征项预选值时触发
> 消息类型：*dc.mq.proj.config.attach*

**请求说明**
+ **请求参数说明**

| 参数                         | 必须 | 类型      | 长度 | 说明                                                                         |
|:-----------------------------|:-----|:----------|:-----|:-----------------------------------------------------------------------------|
| attachs                      | 是   | jsonArray | N/A  | 记录列表                                                                     |
| attachs/attachGUID           | 是   | string    | 64   | 特征编号                                                                     |
| attachs/attachCode           | 是   | string    | 64   | 特征编码，全局唯一<br>10101 经纪人平台<br>10102 地产销售<br>10103 物业<br>20101 业主<br>20102 会员<br>20103 合伙人<br>20104 租客<br>其它见标准定义文档   |                                                                                                                    
| attachs/attachName           | 是   | string    | 64   | 特征名称                                                                     |
| attachs/category             | 是   | int       | 4    | 属于哪一类的特征定义，如身份定义、渠道定义、业态定义、途径定义等；<br>10 渠道<br>20 身份<br>30 业态<br>40 客户描摹<br>50 机会描摹<br>60 途径定义<br>70 媒体活动定义    |                                                     
| attachs/attachLevel          | 是   | int       | 4    | 特征级别<br>1 全局系统级<br>2 业态系统级<br>4 项目组织级<br>8 渠道应用级<br>16 公司级 |                                                                                                                             
| attachs/attachType           | 是   | int       | 4    | 类型根据分类不同分不同的值表示，如分类值是20,即身份，则type可取值为<br>1 自然人<br>2 机构  |                                                               
| attachs/scopeGUID            | 是   | string    | 64   | 范围对象编号，例如：<br>attachLevel=4,scopeGUID取值为项目编号;<br>attachLevel=16,scopeGUID取值为公司编号;                                       |                                                         
| attachs/subGUID              | 否   | string    | 64   | 外键subGUID，引用特征描摹定义表b\_def\_attach(attachGUID),作为特征联动使用。<br>没有则默认不支持        |     
| attachs/input                | 是   | int       | 4    | 输入方式<br>1 手动输入（默认值<br>2 单选<br>3 多选                           |                                                                                                                              
| attachs/showType             | 否   | int       | 4    | 显示方式<br>0 二级平面（默认值）<br>1 树状分局                               |                                                                              
| attachs/requiredLevel        | 否   | int       | 4    | 输入级别：<br>0 否,非必需（默认值）<br>1 是，必填                            |                                       
| attachs/sequence             | 否   | int       | 10   | 特征顺序                                                                     |
| attachs/items                | 是   | jsonArray | N/A  | 候选项列表                                                                   |
| attachs/items/itemGUID       | 是   | string    | 64   | 候选项编号                                                                   |
| attachs/items/itemCode       | 是   | string    | 64   | 候选项编码 (attachKey)                                                       |
| attachs/items/parentItemGUID | 否   | string    | 64   | 父级特征项编号                                                               |
| attachs/items/itemName       | 是   | string    | 64   | 候选项名称(label)                                                            |
| attachs/items/sequence       | 否   | int       | 10   | 候选项的顺序                                                                 |
| attachs/items/state          | 是   | int       | 4    | 状态：<br>1 有效<br>0 无效                                                   |
| attachs/items/expireTime     | 否   | datetime  | 32   | 过期时间，默认为空，表示永不过期                                             |
| attachs/items/scopejGUID     | 是   | string    | 64   | 范围对象编号，例如：<br>attachLevel=4,scopeGUID取值为项目编号<br>attachLevel=16,scopeGUID取值为公司编号  |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.20. N-BA-20代理公司信息通知(org_info_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：ETL从第三方系统抽取项目信息时触发
> 消息类型：*dc.mq.proj.config.org*

**请求说明**
+ **请求参数说明**

| 参数              | 必须           | 类型      | 长度 | 说明     |
|:------------------|:---------------|:----------|:-----|:---------|
| projGUID          | 否             | string    | 64   | 项目编号 |
| list              | 记录存在时必须 | jsonArray | 64   | 记录列表 |
| list/orgGUID      | 是             | string    | 64   | 公司GUID |
| list/orgName      | 是             | string    | 64   | 公司名称 |
| list/orgShortName | 否             | string    | 32   | 公司简称 |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.21. N-BA-21销售团队通知(sale_team_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：新增/修改销售团队配置时触发
> 消息类型：*dc.mq.proj.config.team*

**请求说明**
+ **请求参数说明**

| 参数          | 必须           | 类型      | 长度 | 说明     |
|:--------------|:---------------|:----------|:-----|:---------|
| projGUID      | 否             | string    | 64   | 项目编号 |
| list          | 记录存在时必须 | jsonArray | 64   | 记录列表 |
| list/teamGUID | 是             | string    | 64   | 团队编号 |
| list/teamName | 是             | string    | 64   | 团队名称 |
| list/orgGUID  | 是             | string    | 64   | 公司编号 |
| list/projGUID | 是             | string    | 64   | 项目编号 |
| list/status   | 是             | int       | 10   | 状态：<br>0=无效<br>1=有效    |   
                                                                                                           
**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.5.22. N-CU-22地产客户信息通知(proj_cst_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息的消息类型)**
> 消息来源：<font color="red">存在疑问，待确认</font>
> 消息类型：*dc.mq.project.cst*

**请求说明**
+ **请求参数说明**

| 参数              | 必须 | 类型   | 长度 | 说明                                              |
|:------------------|:-----|:-------|:-----|:--------------------------------------------------|
| cstGUID           | 是   | string | 64   | 客户ID                                            |
| cstName           | 是   | string | 64   | 客户姓名                                          |
| gender            | 是   | int    | 10   | 性别：<br>1 男<br>2 女<br>3 未知                  |
| birthDate         | 否   | string | 64   | 生日：*YYYY-MM-dd HH:mm&#58;ss*                   |
| cstType           | 是   | int    | 10   | 客户类型：<br>1 个人<br>2 公司                    |                                                                              
| mobileTel         | 否   | string | 64   | 手机                                              |
| officeTel         | 否   | string | 64   | 办公电话                                          |
| homeTel           | 否   | string | 64   | 家庭电话                                          |
| sourceApp         | 是   | string | 64   | 系统来源                                          |
| cardType          | 否   | int    | 10   | 证件类型                                          |
| cardID            | 否   | string | 128  | 证件号码                                          |
| userGUID          | 否   | string | 64   | 业务员（新客户是对应登记人、老客户是 对应修改人） |
| address           | 否   | string | 64   | 地址                                              |
| backupTel1        | 否   | string | 64   | 备用号码1                                         |
| backupTel2        | 否   | string | 64   | 备用号码2                                         |
| backupTel3        | 否   | string | 64   | 备用号码3                                         |
| backupTel4        | 否   | string | 64   | 备用号码4                                         |
| corporationPerson | 否   | string | 64   | 企业法人                                          |
| corporationMobile | 否   | string | 64   | 法人联系电话                                      |
| firstContact      | 否   | string | 64   | 首选联系人                                        |
| corporationScale  | 否   | string | 64   | 企业规模                                          |
| projGUID          | 是   | string | 32   | 项目编号                                          |
| extRemark         | 是   | string | 32   | 系统来源备注                                      |
| cognizeAve        | 否   | string | 64   | 认知途径                                          |
| fax               | 否   | string | 64   | 传真                                              |
| family            | 否   | string | 64   | 家庭结构<br>0 未知<br>1 三口<br>2 两口<br>3 单身<br>4 三代同堂  |
| marriage          | 否   | int    | 10   | 婚姻状况<br>0 未知<br>1 未婚<br>2 已婚<br>3 离异<br>4 丧偶      |
| workArea          | 否   | string | 100  | 工作区域                                          |
| homeArea          | 否   | string | 100  | 居住区域                                          |
| userCode          | 是   | string | 64   | 置业顾问账号                                      |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

##4.6.  系统流程类接口

###4.6.1 P-SY-10历史数据请求同步(sync_request)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
经纪人平台
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
写数据中心表：sync_task
+ **消息流(触发异步消息的消息类型)**
无

**请求说明**
+ **请求参数说明**

| 参数           | 必须 | 类型   | 长度 | 说明                                                                                                           |
|:---------------|:-----|:-------|:-----|:---------------------------------------------------------------------------------------------------------------|
| createdBy      | 是   | string | 64   | 操作人                                                                                                         |
| taskName       | 是   | string | 64   | 任务名称                                                                                                       |
| projGUID       | 否   | string | 64   | 项目GUID                                                                                                       |
| shopGUID       | 否   | string | 64   | 门店或商铺GUID                                                                                                 |
| timeRangeStart | 否   | string | 32   | 开始时间，格式为：*YYYY-MM-dd HH:mm&#58;ss*                                                                          |
| timeRangeEnd   | 否   | string | 32   | 结束时间，格式为：*YYYY-MM-dd HH:mm&#58;ss*                                                                          |
| dataType       | 是   | string | 512  | 指定的数据范围，多个数据范围，通过 &#124; 分割，取值对应数据通知，<br>如notify\_cst\_update、notify\_agent\_recommend等 |

**响应说明**
+ **响应参数说明**

| 参数   | 必须 | 类型   | 长度 | 说明     |
|:-------|:-----|:-------|:-----|:---------|
| taskID | 是   | string | 64   | 任务编号 |

###4.6.2. N-SY-02历史数据同步状态通知(sync_result_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：<font color="red">待确认</font>
> 消息类型：dc.mq.sync.request.result

**请求说明**
+ **请求参数说明**

| 参数       | 必须 | 类型     | 长度 | 说明                        |
|:-----------|:-----|:---------|:-----|:----------------------------|
| taskID     | 是   | string   | 64   | 任务编号                    |
| taskName   | 是   | string   | 128  | 任务名称                    |
| startTime  | 是   | datetime | 32   | 开始时间*YYYY-MM-dd HH:mm&#58;ss* |
| finishTime | 是   | datetime | 32   | 完成时间*YYYY-MM-dd HH:mm&#58;ss* |
| status     | 是   | int      | 4    | 状态：<br>1 成功<br>2 失败        |                                                          
| remark     | 是   | string   | 100  | 备注                        |

**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

###4.6.3. N-SY-03项目上线通知(proj_publish_notify)

**接口说明**
+ **功能描述**
+ **应用方(适应系统)：**
案场
+ **数据流(简单描述查询DB或调用接口操作步骤，包含表名或接口名)**
调用数据服务接口：无
+ **消息流(触发异步消息)**
> 消息来源：项目上线时，通过数据中心管理后台，配置上线项目参数后，将项目信息通知到指定案场应用
> 消息类型：dc.mq.proj.online

**请求说明**
+ **请求参数说明**

| 参数               | 必须 | 类型   | 长度 | 说明               |
|:-------------------|:-----|:-------|:-----|:-------------------|
| projInfos          | 是   | array  |      | 项目信息数组       |
| projInfos/projGUID | 是   | string | 64   | 项目编号           |
| projInfos/projName | 是   | string | 64   | 项目名称           |
| projInfos/isOpen   | 是   | int    | 10   | 是否开通移动案场：<br>1 开通<br>0 未开通            | 
                                                           
**响应说明**
+ **响应参数说明**

| 参数 | 必须 | 类型 | 长度 | 说明 |
|:-----|:-----|:-----|:-----|:-----|
|      |      |      |      |      |

#5.  错误码定义

##5.1.  系统错误码

| 错误码 | 描述                 |
|:-------|:---------------------|
| 0      | 成功                 |
| -1     | 未知错误             |
| 1001   | 缺少必须参数         |
| 1002   | 参数类型错误         |
| 1003   | 不支持的请求方式     |
| 1004   | 请求数据格式错误     |
| 1005   | 系统处理失败         |
| 1006   | 请求数据过大         |
| 1007   | 请求数据缺失         |
| 1008   | 不支持的接口请求     |
| 1009   | 接入验证失败         |
| 1010   | 没有接口的权限       |
| 1011   | 未知APP应用          |
| 1012   | 查询的记录不存在     |
| 1013   | 消息序列号重复       |
| 1014   | 响应返回数据格式错误 |
| 1015   | 消息序列号格式错误   |
| 1016   | 没有操作该项目的权限 |
| 1017   | 不支持的消息协议版本 |
| 1018   | 通信消息被非法篡改   |
| 1019   | 不支持的数据服务接口 |
| 1020   | 不支持的content-type |
| 1021   | 调用数据服务接口失败 |
| 1022   | 调用外部接口失败     |
| 1023   | 未知业态来源         |
| 1024   | 不允许修改的数据     |
| 1025   | 未知数据来源         |

##5.2.	业务错误码

业务错误码包含系统外的所有错误码，其中客户信息相关的错误码为2xxx段，
基础数据错误码为4xxx段，推送通知类6xxx段，各业务可通用错误码为9xxx段。

客户类错误码

| 错误码 | 描述                               |
|:-------|:-----------------------------------|
| 2001   | 客户不存在                         |
| 2002   | 客户已经存在                       |
| 2003   | 手机号码已被占用                   |
| 2004   | 证件号码已被占用                   |
| 2005   | 加锁失败\[该客户已被加锁\]         |
| 2006   | 解锁失败                           |
| 2007   | 修改失败\[该客户存在认购或者签约\] |
| 2008   | 验证描摹权限失败                   |
| 2009   | 客户手机号码数量超出限制           |

销售类错误码

| 错误码 | 描述         |
|:-------|:-------------|
| 3001   | 预约不存在   |
| 3002   | 线索不存在   |
| 3003   | 机会不存在   |
| 3004   | 机会已经存在 |

基础数据类错误码

| 错误码 | 描述             |
|:-------|:-----------------|
| 4001   | 项目不存在       |
| 4002   | 置业顾问不存在   |
| 4003   | 置业顾问已经存在 |
| 4004   | 代理公司已经存在 |
| 4005   | 代理公司不存在   |
| 4006   | 指定项目没有开通 |
| 4007   | 经纪人不存在     |
| 4008   | 经纪人已经存在   |
| 4009   | 经纪人身份不明   |
| 4010   | 楼栋不存在       |

推送通知类错误码

| 错误码 | 描述         |
|:-------|:-------------|
| 6001   | 消息推送失败 |
|        |              |

业务通用错误码

| 错误码 | 描述           |
|:-------|:---------------|
| 9001   | 非法身份证号码 |
| 9002   | 非法手机号码   |


